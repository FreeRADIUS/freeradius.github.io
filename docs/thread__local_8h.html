<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/runner/work/freeradius-server/freeradius-server/src/lib/util/thread_local.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="freeradius.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="dir_862598e893fc0f1bed46c00d00206efb.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">thread_local.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Macros to abstract Thread Local Storage.  
<a href="#details">More...</a></p>

<p><a href="thread__local_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afc95018c890c68f40a26327270ed3553"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__local_8h.html#afc95018c890c68f40a26327270ed3553">fr_thread_local_set_destructor</a>(_n,  _f,  _v)</td></tr>
<tr class="memdesc:afc95018c890c68f40a26327270ed3553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a destructor for thread local storage to free the memory on thread exit.  <a href="#afc95018c890c68f40a26327270ed3553">More...</a><br /></td></tr>
<tr class="separator:afc95018c890c68f40a26327270ed3553"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a00615ecdbccaf7ff56579494de0ee32c"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__local_8h.html#a00615ecdbccaf7ff56579494de0ee32c">fr_thread_local_atexit_t</a>) (void *uctx)</td></tr>
<tr class="separator:a00615ecdbccaf7ff56579494de0ee32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adc27d5db31896e058124fdfc0a16ed30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__local_8h.html#adc27d5db31896e058124fdfc0a16ed30">fr_thread_local_atexit</a> (<a class="el" href="thread__local_8h.html#a00615ecdbccaf7ff56579494de0ee32c">fr_thread_local_atexit_t</a> func, void const *uctx)</td></tr>
<tr class="memdesc:adc27d5db31896e058124fdfc0a16ed30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new destructor.  <a href="#adc27d5db31896e058124fdfc0a16ed30">More...</a><br /></td></tr>
<tr class="separator:adc27d5db31896e058124fdfc0a16ed30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab876970f5f6bb1be1d3278a42414118c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__local_8h.html#ab876970f5f6bb1be1d3278a42414118c">fr_thread_local_atexit_setup</a> (void)</td></tr>
<tr class="memdesc:ab876970f5f6bb1be1d3278a42414118c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the atexit handler, should be called at the start of a program's execution.  <a href="#ab876970f5f6bb1be1d3278a42414118c">More...</a><br /></td></tr>
<tr class="separator:ab876970f5f6bb1be1d3278a42414118c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Macros to abstract Thread Local Storage. </p>
<p>Simplifies calling thread local destructors (called when the thread exits).</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2013-2016 The FreeRADIUS server project </dd></dl>

<p class="definition">Definition in file <a class="el" href="thread__local_8h_source.html">thread_local.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afc95018c890c68f40a26327270ed3553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc95018c890c68f40a26327270ed3553">&#9670;&nbsp;</a></span>fr_thread_local_set_destructor</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> fr_thread_local_set_destructor</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_n, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_f, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_v&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">        fr_thread_local_atexit(_f, _v); \</div><div class="line">        _n = _v; \</div><div class="line">} <span class="keywordflow">while</span> (0);</div></div><!-- fragment -->
<p>Set a destructor for thread local storage to free the memory on thread exit. </p>
<dl class="section note"><dt>Note</dt><dd>Pointers to thread local storage seem to become unusable as threads are destroyed. So we need to store the address of the memory to free, not the address of the thread local variable.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_n</td><td>Name of variable e.g. 'my_tls'. </td></tr>
    <tr><td class="paramname">_f</td><td>Destructor, called when the thread exits to clean up any data. </td></tr>
    <tr><td class="paramname">_v</td><td>Memory to free. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="thread__local_8h_source.html#l00055">55</a> of file <a class="el" href="thread__local_8h_source.html">thread_local.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a00615ecdbccaf7ff56579494de0ee32c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00615ecdbccaf7ff56579494de0ee32c">&#9670;&nbsp;</a></span>fr_thread_local_atexit_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_thread_local_atexit_t) (void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__local_8h_source.html#l00039">39</a> of file <a class="el" href="thread__local_8h_source.html">thread_local.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc27d5db31896e058124fdfc0a16ed30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc27d5db31896e058124fdfc0a16ed30">&#9670;&nbsp;</a></span>fr_thread_local_atexit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_thread_local_atexit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="thread__local_8h.html#a00615ecdbccaf7ff56579494de0ee32c">fr_thread_local_atexit_t</a>&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>uctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new destructor. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 on success.</li>
<li>-1 on memory allocation failure; </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="thread__local_8c_source.html#l00163">163</a> of file <a class="el" href="thread__local_8c_source.html">thread_local.c</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="thread__local_8h_adc27d5db31896e058124fdfc0a16ed30_cgraph.svg" width="100%" height="514"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ab876970f5f6bb1be1d3278a42414118c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab876970f5f6bb1be1d3278a42414118c">&#9670;&nbsp;</a></span>fr_thread_local_atexit_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_thread_local_atexit_setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the atexit handler, should be called at the start of a program's execution. </p>

<p class="definition">Definition at line <a class="el" href="thread__local_8c_source.html#l00143">143</a> of file <a class="el" href="thread__local_8c_source.html">thread_local.c</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="thread__local_8h_ab876970f5f6bb1be1d3278a42414118c_cgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="thread__local_8h_ab876970f5f6bb1be1d3278a42414118c_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 13 2020 22:11:27 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
