<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/runner/work/freeradius-server/freeradius-server/src/lib/io/worker.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="freeradius.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="dir_65bc51589f8002bfcb72faf47ab41180.html">io</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">worker.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Worker thread functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;freeradius-devel/io/time_tracking.h&gt;</code><br />
<code>#include &lt;freeradius-devel/io/worker.h&gt;</code><br />
<code>#include &lt;freeradius-devel/io/channel.h&gt;</code><br />
<code>#include &lt;freeradius-devel/io/message.h&gt;</code><br />
<code>#include &lt;freeradius-devel/io/listen.h&gt;</code><br />
<code>#include &lt;freeradius-devel/unlang/interpret.h&gt;</code><br />
<code>#include &lt;freeradius-devel/util/dlist.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for worker.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c__incl.svg" width="100%" height="417"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="worker_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structfr__worker__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#structfr__worker__s">fr_worker_s</a></td></tr>
<tr class="memdesc:structfr__worker__s"><td class="mdescLeft">&#160;</td><td class="mdescRight">A worker which takes packets from a master, and processes them.  <a href="worker_8c.html#structfr__worker__s">More...</a><br /></td></tr>
<tr class="separator:structfr__worker__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5efee98ab973e5be1a58a02acea344fd"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a5efee98ab973e5be1a58a02acea344fd">CHECK_CONFIG</a>(_x,  _min,  _max)</td></tr>
<tr class="separator:a5efee98ab973e5be1a58a02acea344fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1424c4e8fff94cfaf3f0a10d3b0ccf1b"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a1424c4e8fff94cfaf3f0a10d3b0ccf1b">LOG_DST</a>&#160;&#160;&#160;worker-&gt;log</td></tr>
<tr class="separator:a1424c4e8fff94cfaf3f0a10d3b0ccf1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae1d11681b36518afb9413f4194b18a6"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#aae1d11681b36518afb9413f4194b18a6">LOG_PREFIX</a>&#160;&#160;&#160;&quot;%s - &quot;</td></tr>
<tr class="separator:aae1d11681b36518afb9413f4194b18a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1160f41bcf76f349186b6cfce11bcc"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#adf1160f41bcf76f349186b6cfce11bcc">LOG_PREFIX_ARGS</a>&#160;&#160;&#160;worker-&gt;<a class="el" href="rlm__redis__ippool__tool_8c.html#a5f1de76dd5d451949e12c0fbc966ca70">name</a></td></tr>
<tr class="separator:adf1160f41bcf76f349186b6cfce11bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f651bec4c15256fe29757bc0a80727c"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a1f651bec4c15256fe29757bc0a80727c">WORKER_VERIFY</a></td></tr>
<tr class="separator:a1f651bec4c15256fe29757bc0a80727c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a263e7fc1f325b765a70819de479d3c18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a263e7fc1f325b765a70819de479d3c18">cmd_stats_worker</a> (FILE *fp, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> FILE *fp_err, void *ctx, <a class="el" href="command_8h.html#structfr__cmd__info__t">fr_cmd_info_t</a> const *info)</td></tr>
<tr class="separator:a263e7fc1f325b765a70819de479d3c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe0907d923c82ecdade2df1b6195cc87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#abe0907d923c82ecdade2df1b6195cc87">fr_worker</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker)</td></tr>
<tr class="memdesc:abe0907d923c82ecdade2df1b6195cc87"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop and entry point of the worker thread.  <a href="#abe0907d923c82ecdade2df1b6195cc87">More...</a><br /></td></tr>
<tr class="separator:abe0907d923c82ecdade2df1b6195cc87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2057bd8b26f2be947f2a09b2316cad75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="io_2base_8h.html#aeeb7d548e3044038290ca4ceb4380122">fr_channel_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a2057bd8b26f2be947f2a09b2316cad75">fr_worker_channel_create</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, TALLOC_CTX *ctx, <a class="el" href="control_8h.html#abeca26c95cb72c47383a443d271f2222">fr_control_t</a> *master)</td></tr>
<tr class="memdesc:a2057bd8b26f2be947f2a09b2316cad75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a channel to the worker.  <a href="#a2057bd8b26f2be947f2a09b2316cad75">More...</a><br /></td></tr>
<tr class="separator:a2057bd8b26f2be947f2a09b2316cad75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2264591dc785c612e1cb43a01cc815"><td class="memItemLeft" align="right" valign="top"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a9c2264591dc785c612e1cb43a01cc815">fr_worker_create</a> (TALLOC_CTX *ctx, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, char const *<a class="el" href="rlm__redis__ippool__tool_8c.html#a5f1de76dd5d451949e12c0fbc966ca70">name</a>, <a class="el" href="structfr__log__t.html">fr_log_t</a> const *logger, <a class="el" href="lib_2util_2log_8h.html#a4710662265e4ac568d781e53d4170eb1">fr_log_lvl_t</a> lvl, <a class="el" href="worker_8h.html#structfr__worker__config__t">fr_worker_config_t</a> *<a class="el" href="main__stp_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr class="memdesc:a9c2264591dc785c612e1cb43a01cc815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a worker.  <a href="#a9c2264591dc785c612e1cb43a01cc815">More...</a><br /></td></tr>
<tr class="separator:a9c2264591dc785c612e1cb43a01cc815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c220030ee4ae77d5f24e41745c27e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#af6c220030ee4ae77d5f24e41745c27e0">fr_worker_debug</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, FILE *fp)</td></tr>
<tr class="memdesc:af6c220030ee4ae77d5f24e41745c27e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print debug information about the worker structure.  <a href="#af6c220030ee4ae77d5f24e41745c27e0">More...</a><br /></td></tr>
<tr class="separator:af6c220030ee4ae77d5f24e41745c27e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750165b402fdfaeff9d96065dc3a8610"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a750165b402fdfaeff9d96065dc3a8610">fr_worker_destroy</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker)</td></tr>
<tr class="memdesc:a750165b402fdfaeff9d96065dc3a8610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a worker.  <a href="#a750165b402fdfaeff9d96065dc3a8610">More...</a><br /></td></tr>
<tr class="separator:a750165b402fdfaeff9d96065dc3a8610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae0836dd0602843f126e5ea3a37545e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#abae0836dd0602843f126e5ea3a37545e">fr_worker_post_event</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now, void *uctx)</td></tr>
<tr class="memdesc:abae0836dd0602843f126e5ea3a37545e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post-event handler.  <a href="#abae0836dd0602843f126e5ea3a37545e">More...</a><br /></td></tr>
<tr class="separator:abae0836dd0602843f126e5ea3a37545e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae96db34c95a7789f7d86f002df9645b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#ae96db34c95a7789f7d86f002df9645b8">fr_worker_pre_event</a> (void *uctx, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> wake)</td></tr>
<tr class="memdesc:ae96db34c95a7789f7d86f002df9645b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pre-event handler.  <a href="#ae96db34c95a7789f7d86f002df9645b8">More...</a><br /></td></tr>
<tr class="separator:ae96db34c95a7789f7d86f002df9645b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ced8764ad57ac8e3baed9f1a0f1ad2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#af5ced8764ad57ac8e3baed9f1a0f1ad2">fr_worker_request_add</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="server_2module_8h.html#af80b8d62962b7d1c1e3b0af13cd479d0">module_method_t</a> process, void *ctx)</td></tr>
<tr class="memdesc:af5ced8764ad57ac8e3baed9f1a0f1ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously add a request_t to a worker thread.  <a href="#af5ced8764ad57ac8e3baed9f1a0f1ad2">More...</a><br /></td></tr>
<tr class="separator:af5ced8764ad57ac8e3baed9f1a0f1ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a389af56397424b1773acb30847dbff80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a389af56397424b1773acb30847dbff80">fr_worker_stats</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> const *worker, int num, uint64_t *<a class="el" href="radclient_8c.html#a610527352f2a0817290e43dc2940bde6">stats</a>)</td></tr>
<tr class="separator:a389af56397424b1773acb30847dbff80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e0ca9238055b42c3eca19ae4528896"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a06e0ca9238055b42c3eca19ae4528896">itoa_internal</a> (TALLOC_CTX *ctx, uint64_t number)</td></tr>
<tr class="separator:a06e0ca9238055b42c3eca19ae4528896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102950eafb42c50b10b62b79b661c6e3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a102950eafb42c50b10b62b79b661c6e3">worker_channel_callback</a> (void *ctx, void const *<a class="el" href="ring__buffer__test_8c.html#a4b83b6e2cf0af27630a64dce8dd7717a">data</a>, size_t data_size, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a102950eafb42c50b10b62b79b661c6e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a control plane message sent to the worker via a channel.  <a href="#a102950eafb42c50b10b62b79b661c6e3">More...</a><br /></td></tr>
<tr class="separator:a102950eafb42c50b10b62b79b661c6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642a9d419595e5be31d2c51f8c9ae63d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a642a9d419595e5be31d2c51f8c9ae63d">worker_dedup_cmp</a> (void const *one, void const *two)</td></tr>
<tr class="memdesc:a642a9d419595e5be31d2c51f8c9ae63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track a request_t in the "dedup" tree.  <a href="#a642a9d419595e5be31d2c51f8c9ae63d">More...</a><br /></td></tr>
<tr class="separator:a642a9d419595e5be31d2c51f8c9ae63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ddd8df4503a88093f6006230128f141"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a1ddd8df4503a88093f6006230128f141">worker_exit</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker)</td></tr>
<tr class="separator:a1ddd8df4503a88093f6006230128f141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac91e51bbcb287fcfced724690d7a750f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#ac91e51bbcb287fcfced724690d7a750f">worker_max_request_time</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> when, void *uctx)</td></tr>
<tr class="memdesc:ac91e51bbcb287fcfced724690d7a750f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforce max_request_time.  <a href="#ac91e51bbcb287fcfced724690d7a750f">More...</a><br /></td></tr>
<tr class="separator:ac91e51bbcb287fcfced724690d7a750f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9689cabbc749b26886ed388763c81cf3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a9689cabbc749b26886ed388763c81cf3">worker_max_request_timer</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker)</td></tr>
<tr class="memdesc:a9689cabbc749b26886ed388763c81cf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">See when we next need to service the time_order heap for "too old" packets.  <a href="#a9689cabbc749b26886ed388763c81cf3">More...</a><br /></td></tr>
<tr class="separator:a9689cabbc749b26886ed388763c81cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f1ef4738c4307127a9b1b71e2b9a1c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a52f1ef4738c4307127a9b1b71e2b9a1c">worker_nak</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *cd, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a52f1ef4738c4307127a9b1b71e2b9a1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a NAK to the network thread.  <a href="#a52f1ef4738c4307127a9b1b71e2b9a1c">More...</a><br /></td></tr>
<tr class="separator:a52f1ef4738c4307127a9b1b71e2b9a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fe65518d2014b2925e3e886487bab1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#ac3fe65518d2014b2925e3e886487bab1">worker_recv_request</a> (void *ctx, <a class="el" href="io_2base_8h.html#aeeb7d548e3044038290ca4ceb4380122">fr_channel_t</a> *ch, <a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *cd)</td></tr>
<tr class="memdesc:ac3fe65518d2014b2925e3e886487bab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback which handles a message being received on the worker side.  <a href="#ac3fe65518d2014b2925e3e886487bab1">More...</a><br /></td></tr>
<tr class="separator:ac3fe65518d2014b2925e3e886487bab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d484cdecf12ce2aa203971a951a9479"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a5d484cdecf12ce2aa203971a951a9479">worker_request_bootstrap</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *cd, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="separator:a5d484cdecf12ce2aa203971a951a9479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7af51332edc8dd009766d983f2d51db5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a7af51332edc8dd009766d983f2d51db5">worker_request_init</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a7af51332edc8dd009766d983f2d51db5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize various request fields needed by the worker.  <a href="#a7af51332edc8dd009766d983f2d51db5">More...</a><br /></td></tr>
<tr class="separator:a7af51332edc8dd009766d983f2d51db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f023f6bbaf42432e9b482f50afbdf98"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a3f023f6bbaf42432e9b482f50afbdf98">worker_request_time_tracking_start</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a3f023f6bbaf42432e9b482f50afbdf98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start time tracking for a request, and mark it as runnable.  <a href="#a3f023f6bbaf42432e9b482f50afbdf98">More...</a><br /></td></tr>
<tr class="separator:a3f023f6bbaf42432e9b482f50afbdf98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c41db86e6a1350fb533d384d760daf5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a1c41db86e6a1350fb533d384d760daf5">worker_run_request</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> start)</td></tr>
<tr class="memdesc:a1c41db86e6a1350fb533d384d760daf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a request.  <a href="#a1c41db86e6a1350fb533d384d760daf5">More...</a><br /></td></tr>
<tr class="separator:a1c41db86e6a1350fb533d384d760daf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5db44f0aa2f9aa07fd6f0ff18a5291"><td class="memItemLeft" align="right" valign="top">static int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#afe5db44f0aa2f9aa07fd6f0ff18a5291">worker_runnable_cmp</a> (void const *one, void const *two)</td></tr>
<tr class="memdesc:afe5db44f0aa2f9aa07fd6f0ff18a5291"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track a request_t in the "runnable" heap.  <a href="#afe5db44f0aa2f9aa07fd6f0ff18a5291">More...</a><br /></td></tr>
<tr class="separator:afe5db44f0aa2f9aa07fd6f0ff18a5291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a6f5ecd71f625ee95a9a34706b653fa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a9a6f5ecd71f625ee95a9a34706b653fa">worker_send_reply</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, size_t size, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a9a6f5ecd71f625ee95a9a34706b653fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a response packet to the network side.  <a href="#a9a6f5ecd71f625ee95a9a34706b653fa">More...</a><br /></td></tr>
<tr class="separator:a9a6f5ecd71f625ee95a9a34706b653fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2341ebb8fe35b4468abbc0816c13009e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a2341ebb8fe35b4468abbc0816c13009e">worker_stop_request</a> (<a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *worker, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now)</td></tr>
<tr class="memdesc:a2341ebb8fe35b4468abbc0816c13009e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal the unlang interpreter that it needs to stop running the request.  <a href="#a2341ebb8fe35b4468abbc0816c13009e">More...</a><br /></td></tr>
<tr class="separator:a2341ebb8fe35b4468abbc0816c13009e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05661adc485a4798fed967bb277aaa0d"><td class="memItemLeft" align="right" valign="top">static int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a05661adc485a4798fed967bb277aaa0d">worker_time_order_cmp</a> (void const *one, void const *two)</td></tr>
<tr class="memdesc:a05661adc485a4798fed967bb277aaa0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track a request_t in the "time_order" heap.  <a href="#a05661adc485a4798fed967bb277aaa0d">More...</a><br /></td></tr>
<tr class="separator:a05661adc485a4798fed967bb277aaa0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a36360171ed9b0eba9074e0486fa745e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="command_8h.html#structfr__cmd__table__t">fr_cmd_table_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a36360171ed9b0eba9074e0486fa745e7">cmd_worker_table</a> []</td></tr>
<tr class="separator:a36360171ed9b0eba9074e0486fa745e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2daca230a9f4bd192bb94b63137712b9"><td class="memItemLeft" align="right" valign="top">static _Thread_local <a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker_8c.html#a2daca230a9f4bd192bb94b63137712b9">thread_local_worker</a></td></tr>
<tr class="separator:a2daca230a9f4bd192bb94b63137712b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Worker thread functions. </p>
<dl class="section rcs"><dt>Id</dt><dd>66d64c2b1dedca1252fed07a4da4b5c9352563bf </dd></dl>
<p>The "worker" thread is the one responsible for the bulk of the work done when processing a request. Workers are spawned by the scheduler, and create a kqueue (KQ) and control-plane Atomic Queue (AQ) for control-plane communication.</p>
<p>When a network thread discovers that it needs more workers, it asks the scheduler for a KQ/AQ combination. The network thread then creates a channel dedicated to that worker, and sends the channel to the worker in a "new channel" message. The worker receives the channel, and sends an ACK back to the network thread.</p>
<p>The network thread then sends the worker new packets, which the worker receives and processes.</p>
<p>When a packet is decoded, it is put into the "runnable" heap, and also into the "time_order" heap. The main loop <a class="el" href="worker_8c.html#abe0907d923c82ecdade2df1b6195cc87" title="The main loop and entry point of the worker thread. ">fr_worker()</a> then pulls new requests off of this heap and runs them. The worker_check_timeouts() function also checks the tail of the "time_order" heap, and ages out requests which have been active for "too long".</p>
<p>A request may return one of RLM_MODULE_YIELD, RLM_MODULE_OK, or RLM_MODULE_HANDLED. If a request is yielded, it is placed onto the yielded list in the worker "tracking" data structure.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>2016 Alan DeKok (<a href="#" onclick="location.href='mai'+'lto:'+'ala'+'nd'+'@fr'+'ee'+'rad'+'iu'+'s.o'+'rg'; return false;">aland<span style="display: none;">.nosp@m.</span>@fre<span style="display: none;">.nosp@m.</span>eradi<span style="display: none;">.nosp@m.</span>us.o<span style="display: none;">.nosp@m.</span>rg</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structfr__worker__s" id="structfr__worker__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__worker__s">&#9670;&nbsp;</a></span>fr_worker_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_worker_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A worker which takes packets from a master, and processes them. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00077">77</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for fr_worker_s:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structfr__worker__s__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a50d3f542d05c5369a434d147fc9dd481"></a><a class="el" href="atomic__queue_8h.html#a8af6c4b1db89bf32d86ca2b79cbbc3ab">fr_atomic_queue_t</a> *</td>
<td class="fieldname">
aq_control</td>
<td class="fielddoc">
atomic queue for control messages sent to me </td></tr>
<tr><td class="fieldtype">
<a id="a545867412728fd73dd296779e7876fa6"></a><a class="el" href="io_2base_8h.html#aeeb7d548e3044038290ca4ceb4380122">fr_channel_t</a> **</td>
<td class="fieldname">
channel</td>
<td class="fielddoc">
list of channels </td></tr>
<tr><td class="fieldtype">
<a id="a89b91869ebd0736a375e8351a10d3d2c"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a></td>
<td class="fieldname">
checked_timeout</td>
<td class="fielddoc">
when we last checked the tails of the queues </td></tr>
<tr><td class="fieldtype">
<a id="a7dccef4129d53b18af641e5e472e43ad"></a><a class="el" href="worker_8h.html#structfr__worker__config__t">fr_worker_config_t</a></td>
<td class="fieldname">
config</td>
<td class="fielddoc">
external configuration </td></tr>
<tr><td class="fieldtype">
<a id="ae3ecac91c9d60bf557e3b717589e7f74"></a><a class="el" href="control_8h.html#abeca26c95cb72c47383a443d271f2222">fr_control_t</a> *</td>
<td class="fieldname">
control</td>
<td class="fielddoc">
the control plane </td></tr>
<tr><td class="fieldtype">
<a id="aac43a432b461ac6026242991bf0deffd"></a><a class="el" href="time_8h.html#structfr__time__elapsed__t">fr_time_elapsed_t</a></td>
<td class="fieldname">
cpu_time</td>
<td class="fielddoc">
histogram of total CPU time per request </td></tr>
<tr><td class="fieldtype">
<a id="a743bdc37bed32810ffa3b424581594d0"></a><a class="el" href="rbtree_8h.html#a8cd95efc535063a7e3189c83294d9056">rbtree_t</a> *</td>
<td class="fieldname">
dedup</td>
<td class="fielddoc">
de-dup tree </td></tr>
<tr><td class="fieldtype">
<a id="a1251df29376b972a08f4abd9faa716c9"></a><a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *</td>
<td class="fieldname">
el</td>
<td class="fielddoc">
our event list </td></tr>
<tr><td class="fieldtype">
<a id="a356dfc1a4bc1b618bd5478b6552d2141"></a><a class="el" href="event_8h.html#a27c6e7349925b4c501d00d0f3f8d1550">fr_event_timer_t</a> const  *</td>
<td class="fieldname">
ev_cleanup</td>
<td class="fielddoc">
timer for max_request_time </td></tr>
<tr><td class="fieldtype">
<a id="a9194a70735aeb204a529a8fde2ade425"></a>bool</td>
<td class="fieldname">
exiting</td>
<td class="fielddoc">
are we exiting? </td></tr>
<tr><td class="fieldtype">
<a id="a5e1cf6d779df24568bc9bb3359b58ab1"></a><a class="el" href="structfr__log__t.html">fr_log_t</a> const  *</td>
<td class="fieldname">
log</td>
<td class="fielddoc">
log destination </td></tr>
<tr><td class="fieldtype">
<a id="a919e9e6d4a5ff878478adabc51cb8a6c"></a><a class="el" href="lib_2util_2log_8h.html#a4710662265e4ac568d781e53d4170eb1">fr_log_lvl_t</a></td>
<td class="fieldname">
lvl</td>
<td class="fielddoc">
log level </td></tr>
<tr><td class="fieldtype">
<a id="a3205cbdbd2cc4d1c6f1b6aadb207fadd"></a>char const  *</td>
<td class="fieldname">
name</td>
<td class="fielddoc">
name of this worker </td></tr>
<tr><td class="fieldtype">
<a id="a3226b998973423efa009da99539d2a4a"></a>uint64_t</td>
<td class="fieldname">
num_active</td>
<td class="fielddoc">
number of active requests </td></tr>
<tr><td class="fieldtype">
<a id="a9a9049ea8341b090b025a35aa3ac850a"></a>int</td>
<td class="fieldname">
num_channels</td>
<td class="fielddoc">
actual number of channels </td></tr>
<tr><td class="fieldtype">
<a id="a7911b8051cb6b3433d8022a80a4e4772"></a>uint64_t</td>
<td class="fieldname">
num_naks</td>
<td class="fielddoc">
number of messages which were nak'd </td></tr>
<tr><td class="fieldtype">
<a id="a77ebb550bd0b08b0fd79771e87d59c04"></a>uint64_t</td>
<td class="fieldname">
number</td>
<td class="fielddoc">
Per worker request id. </td></tr>
<tr><td class="fieldtype">
<a id="ac1e436aa5c3e269b3d14a07da73c3c7e"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
predicted</td>
<td class="fielddoc">
How long we predict a request will take to execute. </td></tr>
<tr><td class="fieldtype">
<a id="a0731fdbe40af9a15270ef024cf57f71e"></a><a class="el" href="heap_8h.html#aba9d95442e5a2c85ef57dfc59d494663">fr_heap_t</a> *</td>
<td class="fieldname">
runnable</td>
<td class="fielddoc">
current runnable requests which we've spent time processing </td></tr>
<tr><td class="fieldtype">
<a id="a5ec3a7ce00843f20faf6339f6d0c4a93"></a><a class="el" href="io_2base_8h.html#structfr__io__stats__t">fr_io_stats_t</a></td>
<td class="fieldname">
stats</td>
<td class="fielddoc">
input / output stats </td></tr>
<tr><td class="fieldtype">
<a id="ac331aaea357a152dd56c79ed1d6acc51"></a>pthread_t</td>
<td class="fieldname">
thread_id</td>
<td class="fielddoc">
my thread ID </td></tr>
<tr><td class="fieldtype">
<a id="a1a107efc72633fccc54228ce68942084"></a><a class="el" href="heap_8h.html#aba9d95442e5a2c85ef57dfc59d494663">fr_heap_t</a> *</td>
<td class="fieldname">
time_order</td>
<td class="fielddoc">
time ordered heap of requests </td></tr>
<tr><td class="fieldtype">
<a id="a65498e06b6a6092f534b408e098872ec"></a><a class="el" href="time__tracking_8h.html#a7d8933e903945b33e2554ab477d34b5e">fr_time_tracking_t</a></td>
<td class="fieldname">
tracking</td>
<td class="fielddoc">
how much time the worker has spent doing things. </td></tr>
<tr><td class="fieldtype">
<a id="ac4b62cf9fcb8c4f017322834e2224e28"></a><a class="el" href="time_8h.html#structfr__time__elapsed__t">fr_time_elapsed_t</a></td>
<td class="fieldname">
wall_clock</td>
<td class="fielddoc">
histogram of wall clock time per request </td></tr>
<tr><td class="fieldtype">
<a id="a25e9c720bae6af085863e995abef8016"></a>bool</td>
<td class="fieldname">
was_sleeping</td>
<td class="fielddoc">
used to suppress multiple sleep signals in a row </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a5efee98ab973e5be1a58a02acea344fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5efee98ab973e5be1a58a02acea344fd">&#9670;&nbsp;</a></span>CHECK_CONFIG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> CHECK_CONFIG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_min, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_max&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">                if (!worker-&gt;config._x) worker-&gt;<a class="code" href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>._x = _min; \</div><div class="line">                <a class="code" href="acutest_8h.html#a8e9dc24bf3e8d87394046aef2654847f">if</a> (worker-&gt;<a class="code" href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>._x &lt; _min) worker-&gt;<a class="code" href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>._x = _min; \</div><div class="line">                <a class="code" href="acutest_8h.html#a8e9dc24bf3e8d87394046aef2654847f">if</a> (worker-&gt;<a class="code" href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>._x &gt; _max) worker-&gt;<a class="code" href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>._x = _max; \</div><div class="line">       } <a class="code" href="acutest_8h.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a> (0)</div><div class="ttc" id="acutest_8h_html_a8fdafe3be7e00ce3d4f0cb50a9a5eb39"><div class="ttname"><a href="acutest_8h.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a></div><div class="ttdeci">while(1)</div><div class="ttdef"><b>Definition:</b> <a href="acutest_8h_source.html#l00715">acutest.h:715</a></div></div>
<div class="ttc" id="bsc_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="bsc_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">char * config</div><div class="ttdef"><b>Definition:</b> <a href="bsc_8c_source.html#l00056">bsc.c:56</a></div></div>
<div class="ttc" id="acutest_8h_html_a8e9dc24bf3e8d87394046aef2654847f"><div class="ttname"><a href="acutest_8h.html#a8e9dc24bf3e8d87394046aef2654847f">if</a></div><div class="ttdeci">if(!test_colorize__)</div><div class="ttdef"><b>Definition:</b> <a href="acutest_8h_source.html#l00483">acutest.h:483</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1424c4e8fff94cfaf3f0a10d3b0ccf1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1424c4e8fff94cfaf3f0a10d3b0ccf1b">&#9670;&nbsp;</a></span>LOG_DST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> LOG_DST&#160;&#160;&#160;worker-&gt;log</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00055">55</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<a id="aae1d11681b36518afb9413f4194b18a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae1d11681b36518afb9413f4194b18a6">&#9670;&nbsp;</a></span>LOG_PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> LOG_PREFIX&#160;&#160;&#160;&quot;%s - &quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00053">53</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<a id="adf1160f41bcf76f349186b6cfce11bcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf1160f41bcf76f349186b6cfce11bcc">&#9670;&nbsp;</a></span>LOG_PREFIX_ARGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> LOG_PREFIX_ARGS&#160;&#160;&#160;worker-&gt;<a class="el" href="rlm__redis__ippool__tool_8c.html#a5f1de76dd5d451949e12c0fbc966ca70">name</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00054">54</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<a id="a1f651bec4c15256fe29757bc0a80727c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f651bec4c15256fe29757bc0a80727c">&#9670;&nbsp;</a></span>WORKER_VERIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> WORKER_VERIFY</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00069">69</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a263e7fc1f325b765a70819de479d3c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a263e7fc1f325b765a70819de479d3c18">&#9670;&nbsp;</a></span>cmd_stats_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cmd_stats_worker </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> FILE *&#160;</td>
          <td class="paramname"><em>fp_err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="command_8h.html#structfr__cmd__info__t">fr_cmd_info_t</a> const *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01383">1383</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_a263e7fc1f325b765a70819de479d3c18_cgraph.svg" width="346" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abe0907d923c82ecdade2df1b6195cc87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe0907d923c82ecdade2df1b6195cc87">&#9670;&nbsp;</a></span>fr_worker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main loop and entry point of the worker thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker data structure to manage </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01164">1164</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_abe0907d923c82ecdade2df1b6195cc87_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_abe0907d923c82ecdade2df1b6195cc87_icgraph.svg" width="548" height="104"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2057bd8b26f2be947f2a09b2316cad75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2057bd8b26f2be947f2a09b2316cad75">&#9670;&nbsp;</a></span>fr_worker_channel_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="io_2base_8h.html#aeeb7d548e3044038290ca4ceb4380122">fr_channel_t</a>* fr_worker_channel_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="control_8h.html#abeca26c95cb72c47383a443d271f2222">fr_control_t</a> *&#160;</td>
          <td class="paramname"><em>master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a channel to the worker. </p>
<p>Called by the master (i.e. network) thread when it needs to create a new channel to a particuler worker.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">master</td><td>the control plane of the master </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>the context in which the channel will be created </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01307">1307</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a2057bd8b26f2be947f2a09b2316cad75_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a2057bd8b26f2be947f2a09b2316cad75_icgraph.svg" width="100%" height="400"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9c2264591dc785c612e1cb43a01cc815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c2264591dc785c612e1cb43a01cc815">&#9670;&nbsp;</a></span>fr_worker_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a>* fr_worker_create </td>
          <td>(</td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfr__log__t.html">fr_log_t</a> const *&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2util_2log_8h.html#a4710662265e4ac568d781e53d4170eb1">fr_log_lvl_t</a>&#160;</td>
          <td class="paramname"><em>lvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="worker_8h.html#structfr__worker__config__t">fr_worker_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a worker. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>the talloc context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of this worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>the event list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">logger</td><td>the destination for all logging messages </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lvl</td><td>log level </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>various configuration parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>NULL on error</li>
<li>fr_worker_t on success </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01070">1070</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a9c2264591dc785c612e1cb43a01cc815_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_a9c2264591dc785c612e1cb43a01cc815_icgraph.svg" width="591" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af6c220030ee4ae77d5f24e41745c27e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c220030ee4ae77d5f24e41745c27e0">&#9670;&nbsp;</a></span>fr_worker_debug()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_worker_debug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print debug information about the worker structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fp</td><td>the file where the debug output is printed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01282">1282</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_af6c220030ee4ae77d5f24e41745c27e0_cgraph.svg" width="335" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_af6c220030ee4ae77d5f24e41745c27e0_icgraph.svg" width="391" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a750165b402fdfaeff9d96065dc3a8610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a750165b402fdfaeff9d96065dc3a8610">&#9670;&nbsp;</a></span>fr_worker_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_worker_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a worker. </p>
<p>The input channels are signaled, and local messages are cleaned up.</p>
<p>This should be called to <em>EXPLICITLY</em> destroy a worker, when some fatal error has occurred on the worker side, and we need to destroy it.</p>
<p>We signal all pending requests in the backlog to stop, and tell the network side that it should not send us any more requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker to destroy. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01014">1014</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a750165b402fdfaeff9d96065dc3a8610_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_a750165b402fdfaeff9d96065dc3a8610_icgraph.svg" width="603" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abae0836dd0602843f126e5ea3a37545e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae0836dd0602843f126e5ea3a37545e">&#9670;&nbsp;</a></span>fr_worker_post_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_worker_post_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>uctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post-event handler. </p>
<p>This should be run ONLY in single-threaded mode! </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01237">1237</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_abae0836dd0602843f126e5ea3a37545e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_abae0836dd0602843f126e5ea3a37545e_icgraph.svg" width="100%" height="444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae96db34c95a7789f7d86f002df9645b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae96db34c95a7789f7d86f002df9645b8">&#9670;&nbsp;</a></span>fr_worker_pre_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_worker_pre_event </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>uctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>wake</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pre-event handler. </p>
<p>This should be run ONLY in single-threaded mode! </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01216">1216</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_ae96db34c95a7789f7d86f002df9645b8_cgraph.svg" width="299" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_ae96db34c95a7789f7d86f002df9645b8_icgraph.svg" width="430" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af5ced8764ad57ac8e3baed9f1a0f1ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ced8764ad57ac8e3baed9f1a0f1ad2">&#9670;&nbsp;</a></span>fr_worker_request_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_worker_request_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server_2module_8h.html#af80b8d62962b7d1c1e3b0af13cd479d0">module_method_t</a>&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronously add a request_t to a worker thread. </p>
<p>When we don't know what the worker is... </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01248">1248</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_af5ced8764ad57ac8e3baed9f1a0f1ad2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="worker_8c_af5ced8764ad57ac8e3baed9f1a0f1ad2_icgraph.svg" width="444" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a389af56397424b1773acb30847dbff80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389af56397424b1773acb30847dbff80">&#9670;&nbsp;</a></span>fr_worker_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_worker_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> const *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01366">1366</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<a id="a06e0ca9238055b42c3eca19ae4528896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e0ca9238055b42c3eca19ae4528896">&#9670;&nbsp;</a></span>itoa_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* itoa_internal </td>
          <td>(</td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00628">628</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a06e0ca9238055b42c3eca19ae4528896_icgraph.svg" width="100%" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a102950eafb42c50b10b62b79b661c6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102950eafb42c50b10b62b79b661c6e3">&#9670;&nbsp;</a></span>worker_channel_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_channel_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a control plane message sent to the worker via a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>the message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>size of the data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>the current time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00160">160</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a102950eafb42c50b10b62b79b661c6e3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a102950eafb42c50b10b62b79b661c6e3_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a642a9d419595e5be31d2c51f8c9ae63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642a9d419595e5be31d2c51f8c9ae63d">&#9670;&nbsp;</a></span>worker_dedup_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int worker_dedup_cmp </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Track a request_t in the "dedup" tree. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00991">991</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a642a9d419595e5be31d2c51f8c9ae63d_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1ddd8df4503a88093f6006230128f141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ddd8df4503a88093f6006230128f141">&#9670;&nbsp;</a></span>worker_exit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00138">138</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a1ddd8df4503a88093f6006230128f141_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a1ddd8df4503a88093f6006230128f141_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac91e51bbcb287fcfced724690d7a750f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac91e51bbcb287fcfced724690d7a750f">&#9670;&nbsp;</a></span>worker_max_request_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_max_request_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>when</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>uctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enforce max_request_time. </p>
<p>Run periodically, and tries to clean up requests which were received by the network thread more than max_request_time seconds ago. In the interest of not adding a timer for every packet, the requests are given a 1 second leeway.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>the worker's event list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">when</td><td>the current time </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>the fr_worker_t. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00559">559</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_ac91e51bbcb287fcfced724690d7a750f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_ac91e51bbcb287fcfced724690d7a750f_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9689cabbc749b26886ed388763c81cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9689cabbc749b26886ed388763c81cf3">&#9670;&nbsp;</a></span>worker_max_request_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_max_request_timer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>See when we next need to service the time_order heap for "too old" packets. </p>
<p>Inserts a timer into the event list will will trigger when the packet that was received longest ago, would be older than max_request_time. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00603">603</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a9689cabbc749b26886ed388763c81cf3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a9689cabbc749b26886ed388763c81cf3_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a52f1ef4738c4307127a9b1b71e2b9a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52f1ef4738c4307127a9b1b71e2b9a1c">&#9670;&nbsp;</a></span>worker_nak()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_nak </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a NAK to the network thread. </p>
<p>The network thread believes that a worker is running a request until that request has been NAK'd. We typically NAK requests when they've been hanging around in the worker's backlog too long, or there was an error executing the request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cd</td><td>the message to NAK </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>when the message is NAKd </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00278">278</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a52f1ef4738c4307127a9b1b71e2b9a1c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a52f1ef4738c4307127a9b1b71e2b9a1c_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac3fe65518d2014b2925e3e886487bab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3fe65518d2014b2925e3e886487bab1">&#9670;&nbsp;</a></span>worker_recv_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_recv_request </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="io_2base_8h.html#aeeb7d548e3044038290ca4ceb4380122">fr_channel_t</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *&#160;</td>
          <td class="paramname"><em>cd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback which handles a message being received on the worker side. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>the channel to drain </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cd</td><td>the message (if any) to start with </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00128">128</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_ac3fe65518d2014b2925e3e886487bab1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_ac3fe65518d2014b2925e3e886487bab1_icgraph.svg" width="100%" height="400"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5d484cdecf12ce2aa203971a951a9479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d484cdecf12ce2aa203971a951a9479">&#9670;&nbsp;</a></span>worker_request_bootstrap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_request_bootstrap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="channel_8h.html#structfr__channel__data__t">fr_channel_data_t</a> *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00695">695</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a5d484cdecf12ce2aa203971a951a9479_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a5d484cdecf12ce2aa203971a951a9479_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a7af51332edc8dd009766d983f2d51db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7af51332edc8dd009766d983f2d51db5">&#9670;&nbsp;</a></span>worker_request_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_request_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize various request fields needed by the worker. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00650">650</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a7af51332edc8dd009766d983f2d51db5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a7af51332edc8dd009766d983f2d51db5_icgraph.svg" width="100%" height="394"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a3f023f6bbaf42432e9b482f50afbdf98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f023f6bbaf42432e9b482f50afbdf98">&#9670;&nbsp;</a></span>worker_request_time_tracking_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_request_time_tracking_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start time tracking for a request, and mark it as runnable. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00671">671</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a3f023f6bbaf42432e9b482f50afbdf98_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a3f023f6bbaf42432e9b482f50afbdf98_icgraph.svg" width="100%" height="394"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1c41db86e6a1350fb533d384d760daf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c41db86e6a1350fb533d384d760daf5">&#9670;&nbsp;</a></span>worker_run_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_run_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run a request. </p>
<p>Until it either yields, or is done.</p>
<p>This function is also responsible for sending replies, and cleaning up the request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>the worker </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>the current time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00861">861</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a1c41db86e6a1350fb533d384d760daf5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a1c41db86e6a1350fb533d384d760daf5_icgraph.svg" width="100%" height="444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="afe5db44f0aa2f9aa07fd6f0ff18a5291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5db44f0aa2f9aa07fd6f0ff18a5291">&#9670;&nbsp;</a></span>worker_runnable_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8_t worker_runnable_cmp </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Track a request_t in the "runnable" heap. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00967">967</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_afe5db44f0aa2f9aa07fd6f0ff18a5291_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9a6f5ecd71f625ee95a9a34706b653fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a6f5ecd71f625ee95a9a34706b653fa">&#9670;&nbsp;</a></span>worker_send_reply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_send_reply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a response packet to the network side. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>This worker. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>we're sending a reply for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The maximum size of the reply data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>The current time </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00366">366</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a9a6f5ecd71f625ee95a9a34706b653fa_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a9a6f5ecd71f625ee95a9a34706b653fa_icgraph.svg" width="100%" height="534"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a2341ebb8fe35b4468abbc0816c13009e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2341ebb8fe35b4468abbc0816c13009e">&#9670;&nbsp;</a></span>worker_stop_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void worker_stop_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a> *&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Signal the unlang interpreter that it needs to stop running the request. </p>
<p>Signalling is a synchronous operation. Whatever I/O requests the request is currently performing are immediately cancelled, and all the frames are popped off the unlang stack.</p>
<p>Modules and unlang keywords explicitly register signal handlers to deal with their yield points being cancelled/interrupted via this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>running the request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>to cancel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>The current time. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00521">521</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a2341ebb8fe35b4468abbc0816c13009e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a2341ebb8fe35b4468abbc0816c13009e_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a05661adc485a4798fed967bb277aaa0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05661adc485a4798fed967bb277aaa0d">&#9670;&nbsp;</a></span>worker_time_order_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8_t worker_time_order_cmp </td>
          <td>(</td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Track a request_t in the "time_order" heap. </p>

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00981">981</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="worker_8c_a05661adc485a4798fed967bb277aaa0d_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a36360171ed9b0eba9074e0486fa745e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36360171ed9b0eba9074e0486fa745e7">&#9670;&nbsp;</a></span>cmd_worker_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="command_8h.html#structfr__cmd__table__t">fr_cmd_table_t</a> cmd_worker_table[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        {</div><div class="line">                .parent = <span class="stringliteral">&quot;stats&quot;</span>,</div><div class="line">                .name = <span class="stringliteral">&quot;worker&quot;</span>,</div><div class="line">                .help = <span class="stringliteral">&quot;Statistics for workers threads.&quot;</span>,</div><div class="line">                .read_only = <span class="keyword">true</span></div><div class="line">        },</div><div class="line"></div><div class="line">        {</div><div class="line">                .parent = <span class="stringliteral">&quot;stats worker&quot;</span>,</div><div class="line">                .add_name = <span class="keyword">true</span>,</div><div class="line">                .name = <span class="stringliteral">&quot;self&quot;</span>,</div><div class="line">                .syntax = <span class="stringliteral">&quot;[(count|cpu)]&quot;</span>,</div><div class="line">                .func = <a class="code" href="worker_8c.html#a263e7fc1f325b765a70819de479d3c18">cmd_stats_worker</a>,</div><div class="line">                .help = <span class="stringliteral">&quot;Show statistics for a specific worker thread.&quot;</span>,</div><div class="line">                .read_only = <span class="keyword">true</span></div><div class="line">        },</div><div class="line"></div><div class="line">        <a class="code" href="command_8h.html#ad8f08556e2d39d351e3acd3b450a7159">CMD_TABLE_END</a></div><div class="line">}</div><div class="ttc" id="worker_8c_html_a263e7fc1f325b765a70819de479d3c18"><div class="ttname"><a href="worker_8c.html#a263e7fc1f325b765a70819de479d3c18">cmd_stats_worker</a></div><div class="ttdeci">static int cmd_stats_worker(FILE *fp, UNUSED FILE *fp_err, void *ctx, fr_cmd_info_t const *info)</div><div class="ttdef"><b>Definition:</b> <a href="worker_8c_source.html#l01383">worker.c:1383</a></div></div>
<div class="ttc" id="command_8h_html_ad8f08556e2d39d351e3acd3b450a7159"><div class="ttname"><a href="command_8h.html#ad8f08556e2d39d351e3acd3b450a7159">CMD_TABLE_END</a></div><div class="ttdeci">#define CMD_TABLE_END</div><div class="ttdef"><b>Definition:</b> <a href="command_8h_source.html#l00062">command.h:62</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l01419">1419</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
<a id="a2daca230a9f4bd192bb94b63137712b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2daca230a9f4bd192bb94b63137712b9">&#9670;&nbsp;</a></span>thread_local_worker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_Thread_local <a class="el" href="worker_8h.html#aabc8f42afb19edabbed25eb3e42937f5">fr_worker_t</a>* thread_local_worker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="worker_8c_source.html#l00072">72</a> of file <a class="el" href="worker_8c_source.html">worker.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 15 2020 16:50:19 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
