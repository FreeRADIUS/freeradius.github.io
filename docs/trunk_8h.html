<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/runner/work/freeradius-server/freeradius-server/src/lib/server/trunk.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="freeradius.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="dir_dd8369ac01888559ff22cc7524970144.html">server</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trunk.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;freeradius-devel/server/connection.h&gt;</code><br />
<code>#include &lt;freeradius-devel/server/request.h&gt;</code><br />
<code>#include &lt;freeradius-devel/server/cf_parse.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for trunk.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h__incl.svg" width="523" height="156"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="trunk_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structfr__trunk__conf__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#structfr__trunk__conf__t">fr_trunk_conf_t</a></td></tr>
<tr class="memdesc:structfr__trunk__conf__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common configuration parameters for a trunk.  <a href="trunk_8h.html#structfr__trunk__conf__t">More...</a><br /></td></tr>
<tr class="separator:structfr__trunk__conf__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfr__trunk__connection__pub__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#structfr__trunk__connection__pub__s">fr_trunk_connection_pub_s</a></td></tr>
<tr class="memdesc:structfr__trunk__connection__pub__s"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public fields for the trunk connection.  <a href="trunk_8h.html#structfr__trunk__connection__pub__s">More...</a><br /></td></tr>
<tr class="separator:structfr__trunk__connection__pub__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfr__trunk__io__funcs__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#structfr__trunk__io__funcs__t">fr_trunk_io_funcs_t</a></td></tr>
<tr class="memdesc:structfr__trunk__io__funcs__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">I/O functions to pass to fr_trunk_alloc.  <a href="trunk_8h.html#structfr__trunk__io__funcs__t">More...</a><br /></td></tr>
<tr class="separator:structfr__trunk__io__funcs__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfr__trunk__pub__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#structfr__trunk__pub__s">fr_trunk_pub_s</a></td></tr>
<tr class="memdesc:structfr__trunk__pub__s"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public fields for the trunk.  <a href="trunk_8h.html#structfr__trunk__pub__s">More...</a><br /></td></tr>
<tr class="separator:structfr__trunk__pub__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfr__trunk__request__pub__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#structfr__trunk__request__pub__s">fr_trunk_request_pub_s</a></td></tr>
<tr class="memdesc:structfr__trunk__request__pub__s"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public fields for the trunk request.  <a href="trunk_8h.html#structfr__trunk__request__pub__s">More...</a><br /></td></tr>
<tr class="separator:structfr__trunk__request__pub__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a968e883de5dc51826efd99ddb149fc9e"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a>&#160;&#160;&#160;const</td></tr>
<tr class="separator:a968e883de5dc51826efd99ddb149fc9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5536a50a88ec73131c9e014ebeb30211"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a5536a50a88ec73131c9e014ebeb30211">FR_TRUNK_CONN_ALL</a></td></tr>
<tr class="memdesc:a5536a50a88ec73131c9e014ebeb30211"><td class="mdescLeft">&#160;</td><td class="mdescRight">All connection states.  <a href="#a5536a50a88ec73131c9e014ebeb30211">More...</a><br /></td></tr>
<tr class="separator:a5536a50a88ec73131c9e014ebeb30211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc19c94c12a5018e00de7b513882b79f"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#adc19c94c12a5018e00de7b513882b79f">FR_TRUNK_CONN_SERVICEABLE</a></td></tr>
<tr class="memdesc:adc19c94c12a5018e00de7b513882b79f"><td class="mdescLeft">&#160;</td><td class="mdescRight">States where the connection may potentially be used to send requests.  <a href="#adc19c94c12a5018e00de7b513882b79f">More...</a><br /></td></tr>
<tr class="separator:adc19c94c12a5018e00de7b513882b79f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9df2c4185f0dce9f60b2431d797d29a"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#aa9df2c4185f0dce9f60b2431d797d29a">FR_TRUNK_REQUEST_STATE_ALL</a></td></tr>
<tr class="memdesc:aa9df2c4185f0dce9f60b2431d797d29a"><td class="mdescLeft">&#160;</td><td class="mdescRight">All request states.  <a href="#aa9df2c4185f0dce9f60b2431d797d29a">More...</a><br /></td></tr>
<tr class="separator:aa9df2c4185f0dce9f60b2431d797d29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf5a8438d1cd09aafaa84e116111a78"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#afbf5a8438d1cd09aafaa84e116111a78">FR_TRUNK_REQUEST_STATE_CANCEL_ALL</a></td></tr>
<tr class="memdesc:afbf5a8438d1cd09aafaa84e116111a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">All requests in various cancellation states.  <a href="#afbf5a8438d1cd09aafaa84e116111a78">More...</a><br /></td></tr>
<tr class="separator:afbf5a8438d1cd09aafaa84e116111a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae79adde8a9832c9be3e31a37c1940e91"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ae79adde8a9832c9be3e31a37c1940e91">fr_trunk_connection_alloc_t</a>) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="connection_8h.html#structfr__connection__conf__t">fr_connection_conf_t</a> const *<a class="el" href="radsniff_8c.html#ae9b08c8e16b52f7ab0e5c13fb7775156">conf</a>, char const *log_prefix, void *uctx)</td></tr>
<tr class="memdesc:ae79adde8a9832c9be3e31a37c1940e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new connection for the trunk.  <a href="#ae79adde8a9832c9be3e31a37c1940e91">More...</a><br /></td></tr>
<tr class="separator:ae79adde8a9832c9be3e31a37c1940e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9968a4faca6ff7c5f9a854ed4a7b067"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ac9968a4faca6ff7c5f9a854ed4a7b067">fr_trunk_connection_notify_t</a>) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6">fr_trunk_connection_event_t</a> notify_on, void *uctx)</td></tr>
<tr class="memdesc:ac9968a4faca6ff7c5f9a854ed4a7b067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform the trunk API client which I/O events the trunk wants to receive.  <a href="#ac9968a4faca6ff7c5f9a854ed4a7b067">More...</a><br /></td></tr>
<tr class="separator:ac9968a4faca6ff7c5f9a854ed4a7b067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b4ab727583270c2700e8fbc00f5ab9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__connection__pub__s">fr_trunk_connection_pub_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ad3b4ab727583270c2700e8fbc00f5ab9">fr_trunk_connection_t</a></td></tr>
<tr class="separator:ad3b4ab727583270c2700e8fbc00f5ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01017dab83e9466edff3646adefcc5aa"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a01017dab83e9466edff3646adefcc5aa">fr_trunk_request_cancel_mux_t</a>) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td></tr>
<tr class="memdesc:a01017dab83e9466edff3646adefcc5aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform a remote service like a datastore that a request should be cancelled.  <a href="#a01017dab83e9466edff3646adefcc5aa">More...</a><br /></td></tr>
<tr class="separator:a01017dab83e9466edff3646adefcc5aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a84071249e5f09f0e299b633e6639d"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ab2a84071249e5f09f0e299b633e6639d">fr_trunk_request_cancel_t</a>) (<a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *preq_to_reset, <a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1d">fr_trunk_cancel_reason_t</a> reason, void *uctx)</td></tr>
<tr class="memdesc:ab2a84071249e5f09f0e299b633e6639d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an outstanding "sent" request from a tracking/matching structure.  <a href="#ab2a84071249e5f09f0e299b633e6639d">More...</a><br /></td></tr>
<tr class="separator:ab2a84071249e5f09f0e299b633e6639d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85ae63e84a3ab447018a90e5debbd2f"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ae85ae63e84a3ab447018a90e5debbd2f">fr_trunk_request_complete_t</a>) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx, void *uctx)</td></tr>
<tr class="memdesc:ae85ae63e84a3ab447018a90e5debbd2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a successful result to the rctx so that the trunk API client is aware of the result.  <a href="#ae85ae63e84a3ab447018a90e5debbd2f">More...</a><br /></td></tr>
<tr class="separator:ae85ae63e84a3ab447018a90e5debbd2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ae6c2104573f07265c238c3bcc2ac2"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ad8ae6c2104573f07265c238c3bcc2ac2">fr_trunk_request_conn_release_t</a>) (<a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *preq_to_reset, void *uctx)</td></tr>
<tr class="memdesc:ad8ae6c2104573f07265c238c3bcc2ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free connection specific resources from a treq, as the treq is being removed from a connection.  <a href="#ad8ae6c2104573f07265c238c3bcc2ac2">More...</a><br /></td></tr>
<tr class="separator:ad8ae6c2104573f07265c238c3bcc2ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8895221d2c6ebbfb68318d77765ec2"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a0e8895221d2c6ebbfb68318d77765ec2">fr_trunk_request_demux_t</a>) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td></tr>
<tr class="memdesc:a0e8895221d2c6ebbfb68318d77765ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Demultiplex on or more responses, reading them from a connection, decoding them, and matching them with their requests.  <a href="#a0e8895221d2c6ebbfb68318d77765ec2">More...</a><br /></td></tr>
<tr class="separator:a0e8895221d2c6ebbfb68318d77765ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9900881b628001c858eab832e18075d"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#aa9900881b628001c858eab832e18075d">fr_trunk_request_fail_t</a>) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx, <a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">fr_trunk_request_state_t</a> state, void *uctx)</td></tr>
<tr class="memdesc:aa9900881b628001c858eab832e18075d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a failure result to the rctx so that the trunk API client is aware that the request failed.  <a href="#aa9900881b628001c858eab832e18075d">More...</a><br /></td></tr>
<tr class="separator:aa9900881b628001c858eab832e18075d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abea74a3e0bf037aab09ec96aafb37905"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#abea74a3e0bf037aab09ec96aafb37905">fr_trunk_request_free_t</a>) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq_to_free, void *uctx)</td></tr>
<tr class="memdesc:abea74a3e0bf037aab09ec96aafb37905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free resources associated with a trunk request.  <a href="#abea74a3e0bf037aab09ec96aafb37905">More...</a><br /></td></tr>
<tr class="separator:abea74a3e0bf037aab09ec96aafb37905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c85d155c4cc50fbb20754b035a8b85"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a23c85d155c4cc50fbb20754b035a8b85">fr_trunk_request_mux_t</a>) (<a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td></tr>
<tr class="memdesc:a23c85d155c4cc50fbb20754b035a8b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Multiplex one or more requests into a single connection.  <a href="#a23c85d155c4cc50fbb20754b035a8b85">More...</a><br /></td></tr>
<tr class="separator:a23c85d155c4cc50fbb20754b035a8b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21bbf23b7b4b866742a17610f5cdb465"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__request__pub__s">fr_trunk_request_pub_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a21bbf23b7b4b866742a17610f5cdb465">fr_trunk_request_t</a></td></tr>
<tr class="separator:a21bbf23b7b4b866742a17610f5cdb465"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e87c6d0e0c00fbd11252a2f78c32ac8"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__pub__s">fr_trunk_pub_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a6e87c6d0e0c00fbd11252a2f78c32ac8">fr_trunk_t</a></td></tr>
<tr class="separator:a6e87c6d0e0c00fbd11252a2f78c32ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a0d4512f57c53e6d70069a37c199abd1d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1d">fr_trunk_cancel_reason_t</a> { <br />
&#160;&#160;<a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1dada4ddd486149ea11515afe0412d479f0">FR_TRUNK_CANCEL_REASON_NONE</a> = 0, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1da0797b8302a0cc45dad98b51ba93306c3">FR_TRUNK_CANCEL_REASON_SIGNAL</a>, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1da5891c7698e7ccac08869644c51f28cbe">FR_TRUNK_CANCEL_REASON_MOVE</a>, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1dacca58320d90eeb1c2abe6318e8ac82fa">FR_TRUNK_CANCEL_REASON_REQUEUE</a>
<br />
 }<tr class="memdesc:a0d4512f57c53e6d70069a37c199abd1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reasons for a request being cancelled.  <a href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1d">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a0d4512f57c53e6d70069a37c199abd1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9fdcb797f988454d499f3105d7754b6"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6">fr_trunk_connection_event_t</a> { <br />
&#160;&#160;<a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6a3ca77ccd73e87fc86532543d34729971">FR_TRUNK_CONN_EVENT_NONE</a> = 0x00, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6a72e382bc2f39e4f5628f1a761dee3435">FR_TRUNK_CONN_EVENT_READ</a> = 0x01, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6a582ab69c363b72088131aca4986a69e3">FR_TRUNK_CONN_EVENT_WRITE</a> = 0x02, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6aadd456e39b8e5c614225013a5cf8c21b">FR_TRUNK_CONN_EVENT_BOTH</a> = 0x03
<br />
 }<tr class="memdesc:aa9fdcb797f988454d499f3105d7754b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">What type of I/O events the trunk connection is currently interested in receiving.  <a href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aa9fdcb797f988454d499f3105d7754b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210f9d82a7bc721184e1ff200a904a9c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9c">fr_trunk_connection_state_t</a> { <br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca402154599f8b707f8a8fb2ab657c1824">FR_TRUNK_CONN_HALTED</a> = 0x0000, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9caf36bea677cb56d2765c56f845c25f7f4">FR_TRUNK_CONN_INIT</a> = 0x0001, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca6660254946fb8bfce739b8c61ef9707b">FR_TRUNK_CONN_CONNECTING</a> = 0x0002, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9cac7c33f0a87f6fcfb881173c6645af3f4">FR_TRUNK_CONN_ACTIVE</a> = 0x0004, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca2b3577c9dae3011095caff68197134de">FR_TRUNK_CONN_CLOSED</a> = 0x0008, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca655d591ddd58d611ea9676cb33a522ee">FR_TRUNK_CONN_FULL</a> = 0x0010, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca0a611f86a9e328975b0dba13614bb7a6">FR_TRUNK_CONN_INACTIVE</a> = 0x0020, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca7764d96e34074f28314b2d90b2bf87a9">FR_TRUNK_CONN_INACTIVE_DRAINING</a> = 0x0040, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9cabc3b5ee5689f1bdc9c103e2c66ce0268">FR_TRUNK_CONN_DRAINING</a> = 0x0080, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9ca6bc38d954880c3ade1c68cc77a2f0be4">FR_TRUNK_CONN_DRAINING_TO_FREE</a> = 0x0100
<br />
 }<tr class="memdesc:a210f9d82a7bc721184e1ff200a904a9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for sanity checks and to track which list the connection is in.  <a href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9c">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a210f9d82a7bc721184e1ff200a904a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66b28863062ef87a38f7f4aa0cbfddf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a> { <br />
&#160;&#160;<a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddfa0a2c3c2b401958025b7b85c60d2ca091">FR_TRUNK_ENQUEUE_IN_BACKLOG</a> = 1, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddfa9cb21f599a7f063e7ecfa747214862f1">FR_TRUNK_ENQUEUE_OK</a> = 0, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddfa51de2488c03e6e53be534c107bd23c5c">FR_TRUNK_ENQUEUE_NO_CAPACITY</a> = -1, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddfac1651e8f2e1f492f0ba2c936306f65be">FR_TRUNK_ENQUEUE_DST_UNAVAILABLE</a> = -2, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddfafdc3908fa95280750cc878f181879feb">FR_TRUNK_ENQUEUE_FAIL</a> = -3
<br />
 }</td></tr>
<tr class="separator:af66b28863062ef87a38f7f4aa0cbfddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44cddf26dcb250d3e42c7dc6d901ac4e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">fr_trunk_request_state_t</a> { <br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eaf24d1e1b2957a1e9449554f5a700e4cd">FR_TRUNK_REQUEST_STATE_INIT</a> = 0x0000, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eab110b8099ecdd6c6320d99610c6aa226">FR_TRUNK_REQUEST_STATE_UNASSIGNED</a> = 0x0001, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ea123d7eebf371db64caac50b6fdd37940">FR_TRUNK_REQUEST_STATE_BACKLOG</a> = 0x0002, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ea6917c522bcfe10926808d471619b1406">FR_TRUNK_REQUEST_STATE_PENDING</a> = 0x0004, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eaedc7487a3aa5129b1d0dcdc4f4f2c480">FR_TRUNK_REQUEST_STATE_PARTIAL</a> = 0x0008, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ea422e01bf5682f49b0f9d68e3479dcdb4">FR_TRUNK_REQUEST_STATE_SENT</a> = 0x0010, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eaf731ae88e731b9a74c09a4622f215ccc">FR_TRUNK_REQUEST_STATE_COMPLETE</a> = 0x0020, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eacd96333aca17459c7b9c3f22bc88bb2a">FR_TRUNK_REQUEST_STATE_FAILED</a> = 0x0040, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ea25c1a92690c8bf7e9075dd7848e0b1c0">FR_TRUNK_REQUEST_STATE_CANCEL</a> = 0x0080, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4eac5a269422633bc02e329fb6d0f53e377">FR_TRUNK_REQUEST_STATE_CANCEL_SENT</a> = 0x0100, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ead903c0da5476e18e89192e0268321b32">FR_TRUNK_REQUEST_STATE_CANCEL_PARTIAL</a> = 0x0200, 
<br />
&#160;&#160;<a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4ead47437da5f4cedac3a3c54c9f6ab1c1c">FR_TRUNK_REQUEST_STATE_CANCEL_COMPLETE</a> = 0x0400
<br />
 }<tr class="memdesc:a44cddf26dcb250d3e42c7dc6d901ac4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for sanity checks and to simplify freeing.  <a href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a44cddf26dcb250d3e42c7dc6d901ac4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8873963fb2c86e66c2b590b21c9c716e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cf__parse_8h.html#structCONF__PARSER">CONF_PARSER</a> const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a8873963fb2c86e66c2b590b21c9c716e">fr_trunk_config</a> []</td></tr>
<tr class="memdesc:a8873963fb2c86e66c2b590b21c9c716e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Config parser definitions to populate a <a class="el" href="trunk_8h.html#structfr__trunk__conf__t" title="Common configuration parameters for a trunk. ">fr_trunk_conf_t</a>.  <a href="#a8873963fb2c86e66c2b590b21c9c716e">More...</a><br /></td></tr>
<tr class="separator:a8873963fb2c86e66c2b590b21c9c716e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Statistics</h2></td></tr>
<tr class="memitem:a67e6ccfbaf63a45dbae642ebe11bfa0e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a67e6ccfbaf63a45dbae642ebe11bfa0e">fr_trunk_connection_count_by_state</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk, int conn_state)</td></tr>
<tr class="memdesc:a67e6ccfbaf63a45dbae642ebe11bfa0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the count number of connections in the specified states.  <a href="#a67e6ccfbaf63a45dbae642ebe11bfa0e">More...</a><br /></td></tr>
<tr class="separator:a67e6ccfbaf63a45dbae642ebe11bfa0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0a08064485793b003756b197ca6622"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a4a0a08064485793b003756b197ca6622">fr_trunk_request_count_by_connection</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> const *tconn, int req_state)</td></tr>
<tr class="memdesc:a4a0a08064485793b003756b197ca6622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the count number of requests associated with a trunk connection.  <a href="#a4a0a08064485793b003756b197ca6622">More...</a><br /></td></tr>
<tr class="separator:a4a0a08064485793b003756b197ca6622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcfa1464e022ec96b90b8c975fe13b4"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a6dcfa1464e022ec96b90b8c975fe13b4">fr_trunk_request_count_by_state</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk, int conn_state, int req_state)</td></tr>
<tr class="memdesc:a6dcfa1464e022ec96b90b8c975fe13b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a count of requests on a connection in a specific state.  <a href="#a6dcfa1464e022ec96b90b8c975fe13b4">More...</a><br /></td></tr>
<tr class="separator:a6dcfa1464e022ec96b90b8c975fe13b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Request state signalling</h2></td></tr>
<tr class="memitem:a894959f53af966e88a7ea0fda87dc722"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a894959f53af966e88a7ea0fda87dc722">fr_trunk_request_signal_partial</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a894959f53af966e88a7ea0fda87dc722"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal a partial write.  <a href="#a894959f53af966e88a7ea0fda87dc722">More...</a><br /></td></tr>
<tr class="separator:a894959f53af966e88a7ea0fda87dc722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4280399df4f7f50713e75983220b6893"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a4280399df4f7f50713e75983220b6893">fr_trunk_request_signal_sent</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a4280399df4f7f50713e75983220b6893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that the request was written to a connection successfully.  <a href="#a4280399df4f7f50713e75983220b6893">More...</a><br /></td></tr>
<tr class="separator:a4280399df4f7f50713e75983220b6893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68df84abee6703937fcd841ef75797c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a68df84abee6703937fcd841ef75797c7">fr_trunk_request_signal_complete</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a68df84abee6703937fcd841ef75797c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a trunk request is complete.  <a href="#a68df84abee6703937fcd841ef75797c7">More...</a><br /></td></tr>
<tr class="separator:a68df84abee6703937fcd841ef75797c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac307f0d9ad6fd24637e1a27745521946"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ac307f0d9ad6fd24637e1a27745521946">fr_trunk_request_signal_fail</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:ac307f0d9ad6fd24637e1a27745521946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a trunk request failed.  <a href="#ac307f0d9ad6fd24637e1a27745521946">More...</a><br /></td></tr>
<tr class="separator:ac307f0d9ad6fd24637e1a27745521946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22df6123e7ec90e1fafbdab2ed388774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a22df6123e7ec90e1fafbdab2ed388774">fr_trunk_request_signal_cancel</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a22df6123e7ec90e1fafbdab2ed388774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel a trunk request.  <a href="#a22df6123e7ec90e1fafbdab2ed388774">More...</a><br /></td></tr>
<tr class="separator:a22df6123e7ec90e1fafbdab2ed388774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5490c0467c8046f8af5576e0cca9b95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#af5490c0467c8046f8af5576e0cca9b95">fr_trunk_request_signal_cancel_partial</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:af5490c0467c8046f8af5576e0cca9b95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal a partial cancel write.  <a href="#af5490c0467c8046f8af5576e0cca9b95">More...</a><br /></td></tr>
<tr class="separator:af5490c0467c8046f8af5576e0cca9b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11334935e79d8a96c5a0e77b37c93dd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a11334935e79d8a96c5a0e77b37c93dd3">fr_trunk_request_signal_cancel_sent</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a11334935e79d8a96c5a0e77b37c93dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a remote server has been notified of the cancellation.  <a href="#a11334935e79d8a96c5a0e77b37c93dd3">More...</a><br /></td></tr>
<tr class="separator:a11334935e79d8a96c5a0e77b37c93dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a9f060ab945a71549c963550409e87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#af3a9f060ab945a71549c963550409e87">fr_trunk_request_signal_cancel_complete</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:af3a9f060ab945a71549c963550409e87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a remote server acked our cancellation.  <a href="#af3a9f060ab945a71549c963550409e87">More...</a><br /></td></tr>
<tr class="separator:af3a9f060ab945a71549c963550409e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
(R)enqueue and alloc requests</h2></td></tr>
<tr class="memitem:a67069d7159583ef74d1cd099f2d07f30"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a67069d7159583ef74d1cd099f2d07f30">fr_trunk_connection_requests_requeue</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, int states, uint64_t max, bool fail_bound)</td></tr>
<tr class="memdesc:a67069d7159583ef74d1cd099f2d07f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move requests off of a connection and requeue elsewhere.  <a href="#a67069d7159583ef74d1cd099f2d07f30">More...</a><br /></td></tr>
<tr class="separator:a67069d7159583ef74d1cd099f2d07f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bf155fe820d87b93f6127c1b957a18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a42bf155fe820d87b93f6127c1b957a18">fr_trunk_request_free</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **treq)</td></tr>
<tr class="memdesc:a42bf155fe820d87b93f6127c1b957a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the trunk request is freed then update the target requests.  <a href="#a42bf155fe820d87b93f6127c1b957a18">More...</a><br /></td></tr>
<tr class="separator:a42bf155fe820d87b93f6127c1b957a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8205c2bc837805a2634d3b6fee71bc03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a8205c2bc837805a2634d3b6fee71bc03">fr_trunk_request_alloc</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request))</td></tr>
<tr class="memdesc:a8205c2bc837805a2634d3b6fee71bc03"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Pre-)Allocate a new trunk request  <a href="#a8205c2bc837805a2634d3b6fee71bc03">More...</a><br /></td></tr>
<tr class="separator:a8205c2bc837805a2634d3b6fee71bc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02777d6e72e7f5ee93cf25b18b8d9e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ac02777d6e72e7f5ee93cf25b18b8d9e6">fr_trunk_request_enqueue</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **treq, <a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx))</td></tr>
<tr class="memdesc:ac02777d6e72e7f5ee93cf25b18b8d9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue a request that needs data written to the trunk.  <a href="#ac02777d6e72e7f5ee93cf25b18b8d9e6">More...</a><br /></td></tr>
<tr class="separator:ac02777d6e72e7f5ee93cf25b18b8d9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e34d33ea58c5c62d64d12c1620b819"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a72e34d33ea58c5c62d64d12c1620b819">fr_trunk_request_requeue</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *treq)</td></tr>
<tr class="memdesc:a72e34d33ea58c5c62d64d12c1620b819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enqueue a request on the same connection.  <a href="#a72e34d33ea58c5c62d64d12c1620b819">More...</a><br /></td></tr>
<tr class="separator:a72e34d33ea58c5c62d64d12c1620b819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e426e665d3583a76e1e383ebd778e01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a9e426e665d3583a76e1e383ebd778e01">fr_trunk_request_enqueue_on_conn</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **treq_out, <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx, bool ignore_limits))</td></tr>
<tr class="memdesc:a9e426e665d3583a76e1e383ebd778e01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue additional requests on a specific connection.  <a href="#a9e426e665d3583a76e1e383ebd778e01">More...</a><br /></td></tr>
<tr class="separator:a9e426e665d3583a76e1e383ebd778e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a745237c24d6896132622e9e304680260"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a745237c24d6896132622e9e304680260">fr_trunk_request_state_log</a> (<a class="el" href="structfr__log__t.html">fr_log_t</a> const *log, <a class="el" href="lib_2util_2log_8h.html#affd805145b7ef5f1edc308ebb525dd78">fr_log_type_t</a> log_type, char const *<a class="el" href="acutest_8h.html#a29b60fb86c8bb1518f422ccce59448ba">file</a>, int <a class="el" href="acutest_8h.html#ae02820def36ef70995744181ed0e9c4f">line</a>, <a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> const *treq)</td></tr>
<tr class="separator:a745237c24d6896132622e9e304680260"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Dequeue protocol requests and cancellations</h2></td></tr>
<tr class="memitem:a410199905c8c7725d87a3d52c6580bbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a410199905c8c7725d87a3d52c6580bbe">fr_trunk_connection_pop_cancellation</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **treq_out, <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:a410199905c8c7725d87a3d52c6580bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop a cancellation request off a connection's cancellation queue.  <a href="#a410199905c8c7725d87a3d52c6580bbe">More...</a><br /></td></tr>
<tr class="separator:a410199905c8c7725d87a3d52c6580bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f664d4dc57935a73ef1855900f5a5b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a93f664d4dc57935a73ef1855900f5a5b">fr_trunk_connection_pop_request</a> (<a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **treq_out, <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:a93f664d4dc57935a73ef1855900f5a5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop a request off a connection's pending queue.  <a href="#a93f664d4dc57935a73ef1855900f5a5b">More...</a><br /></td></tr>
<tr class="separator:a93f664d4dc57935a73ef1855900f5a5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Connection state signalling</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp19ad782ee3b4dc441de56c1d69d1819e"></a>The following states are signalled from I/O event handlers:</p>
<ul>
<li>writable - The connection is writable (the muxer will be called).</li>
<li>readable - The connection is readable (the demuxer will be called).</li>
<li>reconnect - The connection is likely bad and should be reconnected. If the code signalling has access to the conn, fr_connection_signal_reconnect can be used instead of fr_trunk_connection_signal_reconnect.</li>
</ul>
<p>The following states are signalled to control whether a connection may be assigned new requests:</p>
<ul>
<li>inactive - The connection cannot accept any new requests. Either due to congestion or some other administrative reason.</li>
<li>active - The connection can, once again, accept new requests.</li>
</ul>
<p>Note: In normal operation a connection will automatically transition between the active and inactive states if conf-&gt;max_req_per_conn is specified and the number of pending requests on that connection are equal to that number. If however, the connection has previously been signalled inactive, it will not automatically be reactivated once the number of requests drops below max_req_per_conn.</p>
<p>For other connection states the trunk API should not be signalled directly. It will be informed by "watch" callbacks inserted into the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> as to when the connection changes state.</p>
<p><a class="el" href="trunk_8h.html#a1fa126ae1972a2089056405f2f7b8b93" title="Signal a trunk connection is no longer full. ">fr_trunk_connection_signal_active</a> does not need to be called in any of the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> state callbacks. It is only used to activate a connection which has been previously marked inactive using <a class="el" href="trunk_8h.html#a9c2e24f88f4b711bc17d9723f53892a1" title="Signal a trunk connection cannot accept more requests. ">fr_trunk_connection_signal_inactive</a>.</p>
<p>If <a class="el" href="trunk_8h.html#a9c2e24f88f4b711bc17d9723f53892a1" title="Signal a trunk connection cannot accept more requests. ">fr_trunk_connection_signal_inactive</a> is being used to remove a congested connection from the active list (i.e. on receipt of an explicit protocol level congestion notification), consider calling <a class="el" href="trunk_8h.html#a67069d7159583ef74d1cd099f2d07f30" title="Move requests off of a connection and requeue elsewhere. ">fr_trunk_connection_requests_requeue</a> with the FR_TRUNK_REQUEST_STATE_PENDING state to redistribute that connection's backlog to other connections in the trunk. </p>
</td></tr>
<tr class="memitem:ae4622d45fe16ab018a7ff22f77bfcbcd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ae4622d45fe16ab018a7ff22f77bfcbcd">fr_trunk_connection_signal_writable</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:ae4622d45fe16ab018a7ff22f77bfcbcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a trunk connection is writable.  <a href="#ae4622d45fe16ab018a7ff22f77bfcbcd">More...</a><br /></td></tr>
<tr class="separator:ae4622d45fe16ab018a7ff22f77bfcbcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38296145eead678186a6433af330b35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#aa38296145eead678186a6433af330b35">fr_trunk_connection_signal_readable</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:aa38296145eead678186a6433af330b35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that a trunk connection is readable.  <a href="#aa38296145eead678186a6433af330b35">More...</a><br /></td></tr>
<tr class="separator:aa38296145eead678186a6433af330b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2e24f88f4b711bc17d9723f53892a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a9c2e24f88f4b711bc17d9723f53892a1">fr_trunk_connection_signal_inactive</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:a9c2e24f88f4b711bc17d9723f53892a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal a trunk connection cannot accept more requests.  <a href="#a9c2e24f88f4b711bc17d9723f53892a1">More...</a><br /></td></tr>
<tr class="separator:a9c2e24f88f4b711bc17d9723f53892a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa126ae1972a2089056405f2f7b8b93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a1fa126ae1972a2089056405f2f7b8b93">fr_trunk_connection_signal_active</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn)</td></tr>
<tr class="memdesc:a1fa126ae1972a2089056405f2f7b8b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal a trunk connection is no longer full.  <a href="#a1fa126ae1972a2089056405f2f7b8b93">More...</a><br /></td></tr>
<tr class="separator:a1fa126ae1972a2089056405f2f7b8b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae261bef1f663eb4a697804302be97a93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ae261bef1f663eb4a697804302be97a93">fr_trunk_connection_signal_reconnect</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="connection_8h.html#ad824f2a71886751c780c24f98b76aa41">fr_connection_reason_t</a> reason)</td></tr>
<tr class="memdesc:ae261bef1f663eb4a697804302be97a93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal a trunk connection is no longer viable.  <a href="#ae261bef1f663eb4a697804302be97a93">More...</a><br /></td></tr>
<tr class="separator:ae261bef1f663eb4a697804302be97a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f688617896dc9418d6c972ddb01eea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#ae9f688617896dc9418d6c972ddb01eea">fr_trunk_connection_in_state</a> (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, int state)</td></tr>
<tr class="memdesc:ae9f688617896dc9418d6c972ddb01eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the trunk connection is in one of the specified states.  <a href="#ae9f688617896dc9418d6c972ddb01eea">More...</a><br /></td></tr>
<tr class="separator:ae9f688617896dc9418d6c972ddb01eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Connection management</h2></td></tr>
<tr class="memitem:a179c164ee54b5d5ddfe32387c595b371"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a179c164ee54b5d5ddfe32387c595b371">fr_trunk_reconnect</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk, int state, <a class="el" href="connection_8h.html#ad824f2a71886751c780c24f98b76aa41">fr_connection_reason_t</a> reason)</td></tr>
<tr class="memdesc:a179c164ee54b5d5ddfe32387c595b371"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force the trunk to re-establish its connections.  <a href="#a179c164ee54b5d5ddfe32387c595b371">More...</a><br /></td></tr>
<tr class="separator:a179c164ee54b5d5ddfe32387c595b371"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Trunk allocation</h2></td></tr>
<tr class="memitem:a055d797a7b5348770b776a633780ee1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a055d797a7b5348770b776a633780ee1d">fr_trunk_start</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk)</td></tr>
<tr class="memdesc:a055d797a7b5348770b776a633780ee1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the trunk running.  <a href="#a055d797a7b5348770b776a633780ee1d">More...</a><br /></td></tr>
<tr class="separator:a055d797a7b5348770b776a633780ee1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7e0724f1e350d91411accf2f3d2b43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#aef7e0724f1e350d91411accf2f3d2b43">fr_trunk_connection_manage_start</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk)</td></tr>
<tr class="memdesc:aef7e0724f1e350d91411accf2f3d2b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow the trunk to open and close connections in response to load.  <a href="#aef7e0724f1e350d91411accf2f3d2b43">More...</a><br /></td></tr>
<tr class="separator:aef7e0724f1e350d91411accf2f3d2b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d0e78d99fb37f2a5522253c311ffbd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a0d0e78d99fb37f2a5522253c311ffbd0">fr_trunk_connection_manage_stop</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk)</td></tr>
<tr class="memdesc:a0d0e78d99fb37f2a5522253c311ffbd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the trunk from opening and closing connections in response to load.  <a href="#a0d0e78d99fb37f2a5522253c311ffbd0">More...</a><br /></td></tr>
<tr class="separator:a0d0e78d99fb37f2a5522253c311ffbd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4793e6c5950288e59a61b6cac95bbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#afb4793e6c5950288e59a61b6cac95bbf">fr_trunk_connection_manage_schedule</a> (<a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *trunk)</td></tr>
<tr class="memdesc:afb4793e6c5950288e59a61b6cac95bbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a trunk management event for the next time the event loop is executed.  <a href="#afb4793e6c5950288e59a61b6cac95bbf">More...</a><br /></td></tr>
<tr class="separator:afb4793e6c5950288e59a61b6cac95bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1327562f580bfb76e6a2839d8bd2f7ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca">fr_trunk_alloc</a> (TALLOC_CTX *ctx, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="trunk_8h.html#structfr__trunk__io__funcs__t">fr_trunk_io_funcs_t</a> const *funcs, <a class="el" href="trunk_8h.html#structfr__trunk__conf__t">fr_trunk_conf_t</a> const *<a class="el" href="radsniff_8c.html#ae9b08c8e16b52f7ab0e5c13fb7775156">conf</a>, char const *log_prefix, void const *uctx, bool delay_start))</td></tr>
<tr class="memdesc:a1327562f580bfb76e6a2839d8bd2f7ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a new collection of connections.  <a href="#a1327562f580bfb76e6a2839d8bd2f7ca">More...</a><br /></td></tr>
<tr class="separator:a1327562f580bfb76e6a2839d8bd2f7ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structfr__trunk__conf__t" id="structfr__trunk__conf__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__trunk__conf__t">&#9670;&nbsp;</a></span>fr_trunk_conf_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_trunk_conf_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Common configuration parameters for a trunk. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00193">193</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for fr_trunk_conf_t:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="structfr__trunk__conf__t__coll__graph.svg" width="154" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ac6f6fec649b1d24a9cc0e71410d340b8"></a>bool</td>
<td class="fieldname">
always_writable</td>
<td class="fielddoc">
Set to true if our ability to write requests to a connection handle is not dependant on the state of the underlying connection, i.e. <p>if the library used to implement the connection can always receive and buffer new requests irrespective of the state of the underlying socket. If this is true, <a class="el" href="trunk_8h.html#ae4622d45fe16ab018a7ff22f77bfcbcd" title="Signal that a trunk connection is writable. ">fr_trunk_connection_signal_writable</a> does not need to be called, and requests will be enqueued as soon as they're received. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a60f11223e8c904622228b925a6ef8ab3"></a>bool</td>
<td class="fieldname">
backlog_on_failed_conn</td>
<td class="fielddoc">
Assign requests to the backlog when there are no available connections and the last connection event was a failure, instead of failing them immediately. </td></tr>
<tr><td class="fieldtype">
<a id="aa0468954445ac094b43f53fd394c3b9a"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
close_delay</td>
<td class="fielddoc">
How long we must be below target utilisation to close an existing connection. </td></tr>
<tr><td class="fieldtype">
<a id="a4619ae73f3125e0c72565e2d0f37fce9"></a><a class="el" href="connection_8h.html#structfr__connection__conf__t">fr_connection_conf_t</a> const  *</td>
<td class="fieldname">
conn_conf</td>
<td class="fielddoc">
Connection configuration. </td></tr>
<tr><td class="fieldtype">
<a id="ab3410a7f0e93e237cea9d988ebea8786"></a>uint16_t</td>
<td class="fieldname">
connecting</td>
<td class="fielddoc">
Maximum number of connections that can be in the connecting state. <p>Used to throttle connection spawning. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="af56a315f0fead45993aff5d3983f0b49"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
lifetime</td>
<td class="fielddoc">
Time between reconnects. </td></tr>
<tr><td class="fieldtype">
<a id="acd67df1f6e6b5f68172e0b883de1731a"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
manage_interval</td>
<td class="fielddoc">
How often we run the management algorithm to open/close connections. </td></tr>
<tr><td class="fieldtype">
<a id="aca42d9fb37d9072df1d730fc14a084a7"></a>uint16_t</td>
<td class="fieldname">
max</td>
<td class="fielddoc">
Maximum number of connections in the trunk. </td></tr>
<tr><td class="fieldtype">
<a id="a19d5cd1092eeeae88fe1d5ea77e8de29"></a>uint32_t</td>
<td class="fieldname">
max_req_per_conn</td>
<td class="fielddoc">
Maximum connections per request. <p>Used to determine if we need to create new connections and whether we can enqueue new requests. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a69850374b924ca67b5eed858c1568228"></a>uint64_t</td>
<td class="fieldname">
max_uses</td>
<td class="fielddoc">
The maximum time a connection can be used. </td></tr>
<tr><td class="fieldtype">
<a id="afbe065ac41e04b96fe6f46a4fadac45f"></a>uint16_t</td>
<td class="fieldname">
min</td>
<td class="fielddoc">
Shouldn't let connections drop below this number. </td></tr>
<tr><td class="fieldtype">
<a id="a74c46b72db357764c7e4f39895ec65d0"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
open_delay</td>
<td class="fielddoc">
How long we must be above target utilisation to spawn a new connection. </td></tr>
<tr><td class="fieldtype">
<a id="a0349adfd778d696fac45cdf1e46cd208"></a><a class="el" href="time_8h.html#a107fc1fa0fdf50e580c17fe543d2eeb5">fr_time_delta_t</a></td>
<td class="fieldname">
req_cleanup_delay</td>
<td class="fielddoc">
How long must a request in the unassigned (free) list not have been used for before it's cleaned up and actually freed. </td></tr>
<tr><td class="fieldtype">
<a id="a3016fe581657e0283eba03d67d2229ea"></a>unsigned</td>
<td class="fieldname">
req_pool_headers</td>
<td class="fielddoc">
How many chunk headers the talloc pool allocated with the treq should contain. </td></tr>
<tr><td class="fieldtype">
<a id="ae66754d91d59594066d74b2c93889e41"></a>size_t</td>
<td class="fieldname">
req_pool_size</td>
<td class="fielddoc">
The size of the talloc pool allocated with the treq. </td></tr>
<tr><td class="fieldtype">
<a id="a21b85f319d495e9a648c668c3cfab15d"></a>uint16_t</td>
<td class="fieldname">
start</td>
<td class="fielddoc">
How many connections to start. </td></tr>
<tr><td class="fieldtype">
<a id="aa0a4473cc3d06df6e5703b87b4bd6ef1"></a>uint32_t</td>
<td class="fieldname">
target_req_per_conn</td>
<td class="fielddoc">
How many pending requests should ideally be running on each connection. <p>Averaged across the 'active' set of connections. </p>
</td></tr>
</table>

</div>
</div>
<a name="structfr__trunk__connection__pub__s" id="structfr__trunk__connection__pub__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__trunk__connection__pub__s">&#9670;&nbsp;</a></span>fr_trunk_connection_pub_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_trunk_connection_pub_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Public fields for the trunk connection. </p>
<p>This saves the overhead of using accessors for commonly used fields in trunk connections.</p>
<p>Though these fields are public, they should <em>NOT</em> be modified by clients of the trunk API. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00327">327</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>
</div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Collaboration diagram for fr_trunk_connection_pub_s:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structfr__trunk__connection__pub__s__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aacbf974c9d79c70b3911a40bde208971"></a><a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
conn</td>
<td class="fielddoc">
The underlying connection. </td></tr>
<tr><td class="fieldtype">
<a id="aa32d994d028c40e5320b16ef5c0c935b"></a><a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9c">fr_trunk_connection_state_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
state</td>
<td class="fielddoc">
What state the connection is in. </td></tr>
<tr><td class="fieldtype">
<a id="aabe109e90ca0080adb3c84d18fe3742e"></a><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
trunk</td>
<td class="fielddoc">
Trunk this connection belongs to. </td></tr>
</table>

</div>
</div>
<a name="structfr__trunk__io__funcs__t" id="structfr__trunk__io__funcs__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__trunk__io__funcs__t">&#9670;&nbsp;</a></span>fr_trunk_io_funcs_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_trunk_io_funcs_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>I/O functions to pass to fr_trunk_alloc. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00671">671</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>
</div><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Collaboration diagram for fr_trunk_io_funcs_t:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structfr__trunk__io__funcs__t__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a9bf37de6660094727b7c374ba44a6d1d"></a><a class="el" href="trunk_8h.html#ae79adde8a9832c9be3e31a37c1940e91">fr_trunk_connection_alloc_t</a></td>
<td class="fieldname">
connection_alloc</td>
<td class="fielddoc">
Allocate a new fr_connection_t. </td></tr>
<tr><td class="fieldtype">
<a id="adb371903feb3d25c48029c3f1b070d8f"></a><a class="el" href="trunk_8h.html#ac9968a4faca6ff7c5f9a854ed4a7b067">fr_trunk_connection_notify_t</a></td>
<td class="fieldname">
connection_notify</td>
<td class="fielddoc">
Update the I/O event registrations for. </td></tr>
<tr><td class="fieldtype">
<a id="a9eb18232adea92b79251e58362f608e0"></a><a class="el" href="heap_8h.html#af1f24ec1834d737ad1aeb4a15b0bcc4b">fr_heap_cmp_t</a></td>
<td class="fieldname">
connection_prioritise</td>
<td class="fielddoc">
Ordering function for connections. </td></tr>
<tr><td class="fieldtype">
<a id="af0f6747489dbef774f59f78dca57a841"></a><a class="el" href="trunk_8h.html#ab2a84071249e5f09f0e299b633e6639d">fr_trunk_request_cancel_t</a></td>
<td class="fieldname">
request_cancel</td>
<td class="fielddoc">
Request should be removed from tracking and should be reset to its initial state. </td></tr>
<tr><td class="fieldtype">
<a id="aecfe6017b0eb9b087b957010779d7801"></a><a class="el" href="trunk_8h.html#a01017dab83e9466edff3646adefcc5aa">fr_trunk_request_cancel_mux_t</a></td>
<td class="fieldname">
request_cancel_mux</td>
<td class="fielddoc">
!&lt; Read one or more requests from a connection. <p>Inform an external resource that we no longer care about the result of any queries we issued for this request. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a004c50a14e0a04ede0bc9567693b8845"></a><a class="el" href="trunk_8h.html#ae85ae63e84a3ab447018a90e5debbd2f">fr_trunk_request_complete_t</a></td>
<td class="fieldname">
request_complete</td>
<td class="fielddoc">
Request is complete, interpret the response contained in preq. </td></tr>
<tr><td class="fieldtype">
<a id="a19fbee4a566cf000c86d38316a097924"></a><a class="el" href="trunk_8h.html#ad8ae6c2104573f07265c238c3bcc2ac2">fr_trunk_request_conn_release_t</a></td>
<td class="fieldname">
request_conn_release</td>
<td class="fielddoc">
Any connection specific resources should be removed from the treq as it's about to be moved or freed. </td></tr>
<tr><td class="fieldtype">
<a id="a23a62f0423df04f9be885de942a7cf16"></a><a class="el" href="trunk_8h.html#a0e8895221d2c6ebbfb68318d77765ec2">fr_trunk_request_demux_t</a></td>
<td class="fieldname">
request_demux</td>
<td class="fielddoc">
!&lt; Write one or more requests to a connection. </td></tr>
<tr><td class="fieldtype">
<a id="accf52a204a48d8c3b26d5dc2194fe13f"></a><a class="el" href="trunk_8h.html#aa9900881b628001c858eab832e18075d">fr_trunk_request_fail_t</a></td>
<td class="fieldname">
request_fail</td>
<td class="fielddoc">
Request failed, write out a canned response. </td></tr>
<tr><td class="fieldtype">
<a id="aaeb91c944c8b3cfe936b5be5a59205bf"></a><a class="el" href="trunk_8h.html#abea74a3e0bf037aab09ec96aafb37905">fr_trunk_request_free_t</a></td>
<td class="fieldname">
request_free</td>
<td class="fielddoc">
Free the preq and any resources it holds and provide a chance to mark the request as runnable. </td></tr>
<tr><td class="fieldtype">
<a id="a58b986c36183c028060fa2fa59c9e30d"></a><a class="el" href="trunk_8h.html#a23c85d155c4cc50fbb20754b035a8b85">fr_trunk_request_mux_t</a></td>
<td class="fieldname">
request_mux</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a77259013b01b1df76948d03e474bb96e"></a><a class="el" href="heap_8h.html#af1f24ec1834d737ad1aeb4a15b0bcc4b">fr_heap_cmp_t</a></td>
<td class="fieldname">
request_prioritise</td>
<td class="fielddoc">
Ordering function for requests. <p>Controls where in the outbound queues they're inserted. </p>
</td></tr>
</table>

</div>
</div>
<a name="structfr__trunk__pub__s" id="structfr__trunk__pub__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__trunk__pub__s">&#9670;&nbsp;</a></span>fr_trunk_pub_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_trunk_pub_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Public fields for the trunk. </p>
<p>This saves the overhead of using accessors for commonly used fields in the trunk.</p>
<p>Though these fields are public, they should <em>NOT</em> be modified by clients of the trunk API. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00259">259</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a4815be8646217071b7c9b235be09da81"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_above_target</td>
<td class="fielddoc">
Last time average utilisation went above the target value. </td></tr>
<tr><td class="fieldtype">
<a id="a35d378fbb9103765f8cd53049c1950bb"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_below_target</td>
<td class="fielddoc">
Last time average utilisation went below the target value. </td></tr>
<tr><td class="fieldtype">
<a id="a459ebcf7c46306bdaeeac2b4544db1e1"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_closed</td>
<td class="fielddoc">
Last time the connection management function closed a connection. </td></tr>
<tr><td class="fieldtype">
<a id="a0889653f4023deaeb2df01dd67358aec"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_connected</td>
<td class="fielddoc">
Last time a connection connected. </td></tr>
<tr><td class="fieldtype">
<a id="ae8cd8ab049c08a5d91956ff814aacb22"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_failed</td>
<td class="fielddoc">
Last time a connection failed. </td></tr>
<tr><td class="fieldtype">
<a id="ae273e32aa816c8f67556a1d0927cb6b2"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_open</td>
<td class="fielddoc">
Last time the connection management function opened a connection. </td></tr>
<tr><td class="fieldtype">
<a id="adbce5478e9389b062ac986ace48fadce"></a><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
last_read_success</td>
<td class="fielddoc">
Last time we read a response. </td></tr>
<tr><td class="fieldtype">
<a id="aa1dae6b65e074aa9f24da8491d95004b"></a>uint64_t <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
req_alloc</td>
<td class="fielddoc">
The number of requests currently allocated that have not been freed or returned to the free list. </td></tr>
<tr><td class="fieldtype">
<a id="a8f23e4c1d8a5c5f7b0c96aaacc4a1b04"></a>uint64_t <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
req_alloc_new</td>
<td class="fielddoc">
How many requests we've allocated. </td></tr>
<tr><td class="fieldtype">
<a id="a0b789bc48924775b107d185dfc45d1dd"></a>uint64_t <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
req_alloc_reused</td>
<td class="fielddoc">
How many requests were reused. </td></tr>
<tr><td class="fieldtype">
<a id="a4c24d96207dc660524c84b730ba5c19f"></a>bool <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
triggers</td>
<td class="fielddoc">
do we run the triggers? </td></tr>
</table>

</div>
</div>
<a name="structfr__trunk__request__pub__s" id="structfr__trunk__request__pub__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structfr__trunk__request__pub__s">&#9670;&nbsp;</a></span>fr_trunk_request_pub_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fr_trunk_request_pub_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Public fields for the trunk request. </p>
<p>This saves the overhead of using accessors for commonly used fields in trunk requests.</p>
<p>Though these fields are public, they should <em>NOT</em> be modified by clients of the trunk API. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00305">305</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>
</div><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Collaboration diagram for fr_trunk_request_pub_s:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structfr__trunk__request__pub__s__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aad0d60ca176edf4cfd32fecef3152ed9"></a>void *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
preq</td>
<td class="fielddoc">
Data for the muxer to write to the connection. </td></tr>
<tr><td class="fieldtype">
<a id="ad3b5e7a94bd89e14da74b14cdc87a21b"></a>void *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
rctx</td>
<td class="fielddoc">
Resume ctx of the module. </td></tr>
<tr><td class="fieldtype">
<a id="a7f11231160d0c3f064909ecf5a1c9d42"></a><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
request</td>
<td class="fielddoc">
The request that we're writing the data on behalf of. </td></tr>
<tr><td class="fieldtype">
<a id="a735443264d989c7b747fa1c9fe142556"></a><a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">fr_trunk_request_state_t</a> <a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
state</td>
<td class="fielddoc">
Which list the request is now located in. </td></tr>
<tr><td class="fieldtype">
<a id="a14ce492d5b355fba3fa663c033307dbb"></a><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
tconn</td>
<td class="fielddoc">
Connection this request belongs to. </td></tr>
<tr><td class="fieldtype">
<a id="aad090c42deef9559da4eae2cbba264cb"></a><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *<a class="el" href="value_8h.html#a968e883de5dc51826efd99ddb149fc9e">_CONST</a></td>
<td class="fieldname">
trunk</td>
<td class="fielddoc">
Trunk this request belongs to. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a968e883de5dc51826efd99ddb149fc9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968e883de5dc51826efd99ddb149fc9e">&#9670;&nbsp;</a></span>_CONST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> _CONST&#160;&#160;&#160;const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00047">47</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a5536a50a88ec73131c9e014ebeb30211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5536a50a88ec73131c9e014ebeb30211">&#9670;&nbsp;</a></span>FR_TRUNK_CONN_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> FR_TRUNK_CONN_ALL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(\</div><div class="line">        FR_TRUNK_CONN_INIT | \</div><div class="line">        FR_TRUNK_CONN_CONNECTING | \</div><div class="line">        FR_TRUNK_CONN_ACTIVE | \</div><div class="line">        FR_TRUNK_CONN_CLOSED | \</div><div class="line">        FR_TRUNK_CONN_FULL | \</div><div class="line">        FR_TRUNK_CONN_INACTIVE | \</div><div class="line">        FR_TRUNK_CONN_DRAINING | \</div><div class="line">        FR_TRUNK_CONN_DRAINING_TO_FREE \</div><div class="line">)</div></div><!-- fragment -->
<p>All connection states. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00104">104</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="adc19c94c12a5018e00de7b513882b79f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc19c94c12a5018e00de7b513882b79f">&#9670;&nbsp;</a></span>FR_TRUNK_CONN_SERVICEABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> FR_TRUNK_CONN_SERVICEABLE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(\</div><div class="line">        FR_TRUNK_CONN_ACTIVE | \</div><div class="line">        FR_TRUNK_CONN_INACTIVE | \</div><div class="line">        FR_TRUNK_CONN_DRAINING | \</div><div class="line">        FR_TRUNK_CONN_INACTIVE_DRAINING | \</div><div class="line">        FR_TRUNK_CONN_DRAINING_TO_FREE \</div><div class="line">)</div></div><!-- fragment -->
<p>States where the connection may potentially be used to send requests. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00119">119</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="aa9df2c4185f0dce9f60b2431d797d29a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9df2c4185f0dce9f60b2431d797d29a">&#9670;&nbsp;</a></span>FR_TRUNK_REQUEST_STATE_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> FR_TRUNK_REQUEST_STATE_ALL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(\</div><div class="line">        FR_TRUNK_REQUEST_STATE_BACKLOG | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_PENDING | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_PARTIAL | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_SENT | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_COMPLETE | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_FAILED | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_PARTIAL | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_SENT | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_COMPLETE \</div><div class="line">)</div></div><!-- fragment -->
<p>All request states. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00165">165</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="afbf5a8438d1cd09aafaa84e116111a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbf5a8438d1cd09aafaa84e116111a78">&#9670;&nbsp;</a></span>FR_TRUNK_REQUEST_STATE_CANCEL_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="build_8h.html#a0ec3f1f76900803ac4f041eb90b84a34">define</a> FR_TRUNK_REQUEST_STATE_CANCEL_ALL</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(\</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_PARTIAL | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_SENT | \</div><div class="line">        FR_TRUNK_REQUEST_STATE_CANCEL_COMPLETE \</div><div class="line">)</div></div><!-- fragment -->
<p>All requests in various cancellation states. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00182">182</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae79adde8a9832c9be3e31a37c1940e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae79adde8a9832c9be3e31a37c1940e91">&#9670;&nbsp;</a></span>fr_trunk_connection_alloc_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a>*(* fr_trunk_connection_alloc_t) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="connection_8h.html#structfr__connection__conf__t">fr_connection_conf_t</a> const *<a class="el" href="radsniff_8c.html#ae9b08c8e16b52f7ab0e5c13fb7775156">conf</a>, char const *log_prefix, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new connection for the trunk. </p>
<p>The trunk code only interacts with underlying connections via the connection API. As a result the trunk API is shielded from the implementation details of opening and closing connections.</p>
<p>When creating new connections, this callback is used to allocate and configure a new <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a>, this <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> and the fr_connection API is how the trunk signals the underlying connection that it should start, reconnect, and halt (stop).</p>
<p>The trunk must be informed when the underlying connection is readable, and, if <code>always_writable == false</code>, when the connection is writable.</p>
<p>When the connection is readable, a read I/O handler installed by the <a class="el" href="fuzzer_8c.html#a50300ba6e38ec30121edcc07ebac42c6">init()</a> callback of the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> must either:</p>
<ul>
<li>If there's no underlying I/O library, call <code>fr_trunk_connection_signal_readable(tconn)</code> immediately, relying on the trunk demux callback to perform decoding and demuxing.</li>
<li>If there is an underlying I/O library, feed any incoming data to that library and then call <a class="el" href="trunk_8h.html#aa38296145eead678186a6433af330b35" title="Signal that a trunk connection is readable. ">fr_trunk_connection_signal_readable</a> if the underlying I/O library indicates complete responses are ready for processing.</li>
</ul>
<p>When the connection is writable a write I/O handler installed by the open() callback of the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> must either:</p>
<ul>
<li>If <code>always_writable == true</code> - Inform the underlying I/O library that the connection is writable. The trunk API does not need to be informed as it will immediately pass through any enqueued requests to the I/O library.</li>
<li>If <code>always_writable == false</code> and there's an underlying I/O library, call <code>fr_trunk_connection_signal_writable(tconn)</code> to allow the trunk mux callback to pass requests to the underlying I/O library and (optionally) signal the I/O library that the connection is writable.</li>
<li>If <code>always_writable == false</code> and there's no underlying I/O library, call <code>fr_trunk_connection_signal_writable(tconn)</code> to allow the trunk mux callback to encode and write requests to a socket.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>The trunk connection this connection will be bound to. Should be used as the context for any <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> allocated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>The event list to use for I/O and timer events. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>Configuration of the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">log_prefix</td><td>What to prefix connection log messages with. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>A new fr_connection_t on success (should be in the halted state - the default).</li>
<li>NULL on error. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00387">387</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="ac9968a4faca6ff7c5f9a854ed4a7b067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9968a4faca6ff7c5f9a854ed4a7b067">&#9670;&nbsp;</a></span>fr_trunk_connection_notify_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_connection_notify_t) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6">fr_trunk_connection_event_t</a> notify_on, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inform the trunk API client which I/O events the trunk wants to receive. </p>
<p>I/O handlers installed by this callback should call one or more of the following functions to signal that an I/O event has occurred:</p>
<ul>
<li>fr_trunk_connection_signal_writable - Connection is now writable.</li>
<li>fr_trunk_connection_signal_readable - Connection is now readable.</li>
<li>fr_trunk_connection_signal_inactive - Connection is full or congested.</li>
<li>fr_trunk_connection_signal_active - Connection is no longer full or congested.</li>
<li>fr_trunk_connection_signal_reconnect - Connection is inviable and should be reconnected.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>That should be notified of I/O events. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>The <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> bound to the tconn. Use conn-&gt;h to access the connection handle or file descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>to insert I/O events into. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">notify_on</td><td>I/O events to signal the trunk connection on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00410">410</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="ad3b4ab727583270c2700e8fbc00f5ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b4ab727583270c2700e8fbc00f5ab9">&#9670;&nbsp;</a></span>fr_trunk_connection_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__connection__pub__s">fr_trunk_connection_pub_s</a> <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00045">45</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a01017dab83e9466edff3646adefcc5aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01017dab83e9466edff3646adefcc5aa">&#9670;&nbsp;</a></span>fr_trunk_request_cancel_mux_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_cancel_mux_t) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inform a remote service like a datastore that a request should be cancelled. </p>
<p>This callback will be called any time there are one or more requests to be cancelled and a <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> is writable, or as soon as a request is cancelled if <code>always_writable == true</code>.</p>
<p>For efficiency, this callback should call <a class="el" href="trunk_8h.html#a410199905c8c7725d87a3d52c6580bbe" title="Pop a cancellation request off a connection&#39;s cancellation queue. ">fr_trunk_connection_pop_cancellation</a> multiple times, and process all outstanding cancellation requests.</p>
<p>If the response (cancel ACK) from the remote service needs to be tracked, then the treq should be inserted into a tracking tree shared with the demuxer, and <a class="el" href="trunk_8h.html#a11334935e79d8a96c5a0e77b37c93dd3" title="Signal that a remote server has been notified of the cancellation. ">fr_trunk_request_signal_cancel_sent</a> should be called to move the treq into the cancel_sent state.</p>
<p>As with the main mux callback, if a cancellation request is partially written <a class="el" href="trunk_8h.html#af5490c0467c8046f8af5576e0cca9b95" title="Signal a partial cancel write. ">fr_trunk_request_signal_cancel_partial</a> should be called, and the amount of data written should be tracked in the preq (protocol request).</p>
<p>When the demuxer finds a matching (cancel ACK) response, the demuxer should remove the entry from the tracking tree and call <a class="el" href="trunk_8h.html#af3a9f060ab945a71549c963550409e87" title="Signal that a remote server acked our cancellation. ">fr_trunk_request_signal_cancel_complete</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>The trunk connection used to dequeue cancellation requests. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>Connection to write the request to. Use conn-&gt;h to access the connection handle or file descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00527">527</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="ab2a84071249e5f09f0e299b633e6639d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a84071249e5f09f0e299b633e6639d">&#9670;&nbsp;</a></span>fr_trunk_request_cancel_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_cancel_t) (<a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *preq_to_reset, <a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1d">fr_trunk_cancel_reason_t</a> reason, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove an outstanding "sent" request from a tracking/matching structure. </p>
<p>If the treq (trunk request) is in the FR_TRUNK_REQUEST_STATE_PARTIAL or FR_TRUNK_REQUEST_STATE_SENT states, this callback will be called prior to moving the treq to a new connection, requeueing the tre or freeing the treq.</p>
<p>The treq, and any associated resources, should be removed from the the matching structure associated with the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> or uctx.</p>
<p>Which resources should be freed depends on the cancellation reason:</p>
<ul>
<li>FR_TRUNK_CANCEL_REASON_REQUEUE - If an encoded request can be reused, then it should be kept, otherwise it should be freed. Any resources like ID allocations bound to that request should also be freed. <a class="el" href="trunk_8h.html#ad8ae6c2104573f07265c238c3bcc2ac2" title="Free connection specific resources from a treq, as the treq is being removed from a connection...">fr_trunk_request_conn_release_t</a> callback will not be called in this instance and cannot be used as an alternative.</li>
<li>FR_TRUNK_CANCEL_REASON_MOVE - If an encoded request can be reused it should be kept. The trunk mux callback should be aware that an encoded request may already be associated with a preq and use that instead of re-encoding the preq. If the encoded request cannot be reused it should be freed, and any fields in the preq that were modified during the last mux call (other than perhaps counters) should be reset to their initial values. Alternatively the <a class="el" href="trunk_8h.html#ad8ae6c2104573f07265c238c3bcc2ac2" title="Free connection specific resources from a treq, as the treq is being removed from a connection...">fr_trunk_request_conn_release_t</a> callback can be used for the same purpose, as that will be called before the request is moved.</li>
<li>FR_TRUNK_CANCEL_REASON_SIGNAL - The encoded request and any I/O library request handled may be freed though that may (optionally) be left to another callback like <a class="el" href="trunk_8h.html#ad8ae6c2104573f07265c238c3bcc2ac2" title="Free connection specific resources from a treq, as the treq is being removed from a connection...">fr_trunk_request_conn_release_t</a>, as that will be called as the treq is removed from the conn. Note that the <a class="el" href="trunk_8h.html#ae85ae63e84a3ab447018a90e5debbd2f" title="Write a successful result to the rctx so that the trunk API client is aware of the result...">fr_trunk_request_complete_t</a> and <a class="el" href="trunk_8h.html#aa9900881b628001c858eab832e18075d" title="Write a failure result to the rctx so that the trunk API client is aware that the request failed...">fr_trunk_request_fail_t</a> callbacks will not be called in this instance.</li>
</ul>
<p>After this callback is complete one of several actions will be taken:</p>
<ul>
<li>If the cancellation reason was FR_TRUNK_CANCEL_REASON_REQUEUE the treq will be placed back into the pending list of the connection it was previously associated with.</li>
<li>If the cancellation reason was FR_TRUNK_CANCEL_REASON_MOVE, the treq will move to the unassigned state, and then either be placed in the trunk backlog, or immediately enqueued on another trunk connection.</li>
<li>If the reason was FR_TRUNK_CANCEL_SIGNAL<ul>
<li>...and a request_cancel_mux callback was provided, the the request_cancel_mux callback will be called when the connection is next writable (or immediately if <code>always_writable == true</code>) and the request_cancel_mux callback will send an explicit cancellation request to terminate any outstanding queries on remote datastores.</li>
<li>...and no request_cancel_mux callback was provided, the treq will enter the unassigned state and then be freed.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>FR_TRUNK_CANCEL_REASON_MOVE will only be set if the underlying connection is bad. A 'sent' treq will never be moved due to load balancing.</dd>
<dd>
There is no need to signal request state changes in the cancellation function. The trunk will move the request into the correct state. This callback is only to allow the API client to cleanup the preq in preparation for the cancellation event.</dd>
<dd>
Cancellation requests to a remote datastore should not be made here. If that is required, a cancel_mux function should be provided.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>to remove request from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preq_to_reset</td><td>Preq to reset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reason</td><td>Why the request was cancelled. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00599">599</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="ae85ae63e84a3ab447018a90e5debbd2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85ae63e84a3ab447018a90e5debbd2f">&#9670;&nbsp;</a></span>fr_trunk_request_complete_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_complete_t) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a successful result to the rctx so that the trunk API client is aware of the result. </p>
<p>The rctx should be modified in such a way that indicates to the trunk API client that the request was sent using the trunk and a response was received.</p>
<p>This function should not free any resources associated with the preq. That should be done in the request_free callback. This function should only be used to translate the contents of the preq into a result, and write it to the rctx.</p>
<p>After this callback is complete, the request_free callback will be called if provided. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00629">629</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="ad8ae6c2104573f07265c238c3bcc2ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ae6c2104573f07265c238c3bcc2ac2">&#9670;&nbsp;</a></span>fr_trunk_request_conn_release_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_conn_release_t) (<a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *preq_to_reset, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free connection specific resources from a treq, as the treq is being removed from a connection. </p>
<p>Any connection specific resources that the treq currently holds must be released. Examples are connection-specific handles, ID allocations, and connection specific packets.</p>
<p>The treq may be about to be freed or it may be being re-assigned to a new connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>request will be removed from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preq_to_reset</td><td>Preq to remove connection specified resources from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00615">615</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a0e8895221d2c6ebbfb68318d77765ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e8895221d2c6ebbfb68318d77765ec2">&#9670;&nbsp;</a></span>fr_trunk_request_demux_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_demux_t) (<a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Demultiplex on or more responses, reading them from a connection, decoding them, and matching them with their requests. </p>
<p>This callback should either:</p>
<ul>
<li>If an underlying I/O library is used, request complete responses from the I/O library, and match the responses with a treq (trunk request) using a tracking structure associated with the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> or uctx.</li>
<li>If no underlying I/O library is used, read responses from the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a>, decode those responses, and match those responses with a treq using a tracking structure associated with the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> or uctx.</li>
</ul>
<p>The result (positive or negative), should be written to the rctx structure.</p>
<p><a class="el" href="trunk_8h.html#a68df84abee6703937fcd841ef75797c7" title="Signal that a trunk request is complete. ">fr_trunk_request_signal_complete</a> should be used to inform the trunk that the request is now complete.</p>
<p>If a connection appears to have become unusable, this callback should call <a class="el" href="connection_8h.html#afbcf2ecc866b1f1092fa70d6400fd4f3" title="Asynchronously signal the connection should be reconnected. ">fr_connection_signal_reconnect</a> and immediately return. The current treq will either fail, or be re-enqueued depending on the trunk configuration.</p>
<p><a class="el" href="trunk_8h.html#ac307f0d9ad6fd24637e1a27745521946" title="Signal that a trunk request failed. ">fr_trunk_request_signal_fail</a> should <em>NOT</em> be called as this function is only used for reporting failures at an I/O layer level not failures of queries or external services.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>The trunk connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>Connection to read the request from. Use conn-&gt;h to access the connection handle or file descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00496">496</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="aa9900881b628001c858eab832e18075d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9900881b628001c858eab832e18075d">&#9670;&nbsp;</a></span>fr_trunk_request_fail_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_fail_t) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq, void *rctx, <a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">fr_trunk_request_state_t</a> state, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a failure result to the rctx so that the trunk API client is aware that the request failed. </p>
<p>The rctx should be modified in such a way that indicates to the trunk API client that the request could not be sent using the trunk.</p>
<p>This function should not free any resources associated with the preq. That should be done in the request_free callback. This function should only be used to write a "canned" failure to the rctx.</p>
<dl class="section note"><dt>Note</dt><dd>If a cancel function is provided, the cancel function should be used to remove active requests from any request/response matching, not the fail function. Both the cancel and fail functions will be called for a request that has been sent or partially sent.</dd></dl>
<p>After this callback is complete, the request_free callback will be called if provided. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00647">647</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="abea74a3e0bf037aab09ec96aafb37905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abea74a3e0bf037aab09ec96aafb37905">&#9670;&nbsp;</a></span>fr_trunk_request_free_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_free_t) (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void *preq_to_free, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free resources associated with a trunk request. </p>
<p>The trunk request is complete. If there's a request still associated with the trunk request, that will be provided so that it can be marked runnable, but be aware that the request_t * value will be NULL if the request was cancelled due to a signal.</p>
<p>The preq and any associated data such as encoded packets or I/O library request handled <em>SHOULD</em> be explicitly freed by this function. The exception to this is if the preq is parented by the treq, in which case the preq will be explicitly freed when the treq is returned to the free list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>to mark as runnable if no further processing is required. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preq_to_free</td><td>As per the name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00666">666</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a23c85d155c4cc50fbb20754b035a8b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c85d155c4cc50fbb20754b035a8b85">&#9670;&nbsp;</a></span>fr_trunk_request_mux_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* fr_trunk_request_mux_t) (<a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *tconn, <a class="el" href="server_2connection_8c.html#a39db4f55d33981b2445f03ecde4994b6">fr_connection_t</a> *conn, void *uctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Multiplex one or more requests into a single connection. </p>
<p>This callback should:</p>
<ul>
<li>Pop one or more requests from the trunk connection's pending queue using <a class="el" href="trunk_8h.html#a93f664d4dc57935a73ef1855900f5a5b" title="Pop a request off a connection&#39;s pending queue. ">fr_trunk_connection_pop_request</a>.</li>
<li>Serialize the protocol request data contained within the trunk request's (treq's) pctx, writing it to the provided <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> (or underlying connection handle).</li>
<li>Insert the provided treq into a tracking structure associated with the <a class="el" href="connection_8h.html#a8e02ed3c1b400b5e744913e2c873d66f">fr_connection_t</a> or uctx. This tracking structure will be used later in the trunk demux callback to match protocol requests with protocol responses.</li>
</ul>
<p>If working at the socket level and a write on a file descriptor indicates less data was written than was needed, the trunk API client should track the amount of data written in the protocol request (preq), and should call <code>fr_trunk_request_signal_partial(treq)</code>. <a class="el" href="trunk_8h.html#a894959f53af966e88a7ea0fda87dc722" title="Signal a partial write. ">fr_trunk_request_signal_partial</a> will move the request out of the pending queue, and store it in the partial slot of the trunk connection. The next time <a class="el" href="trunk_8h.html#a93f664d4dc57935a73ef1855900f5a5b" title="Pop a request off a connection&#39;s pending queue. ">fr_trunk_connection_pop_request</a> is called, the partially written treq will be returned first. The API client should continue writing the partially written request to the socket.</p>
<p>After calling <a class="el" href="trunk_8h.html#a894959f53af966e88a7ea0fda87dc722" title="Signal a partial write. ">fr_trunk_request_signal_partial</a> this callback <em>MUST NOT</em> call <a class="el" href="trunk_8h.html#a93f664d4dc57935a73ef1855900f5a5b" title="Pop a request off a connection&#39;s pending queue. ">fr_trunk_connection_pop_request</a> again, and should immediately return.</p>
<p>If the request can't be written to the connection because it the connection has become unusable, this callback should call <code>fr_connection_signal_reconnect(conn)</code> to notify the connection API that the connection is unusable. The current request will either fail, or be re-enqueued depending on the trunk configuration.</p>
<p>After calling <a class="el" href="connection_8h.html#afbcf2ecc866b1f1092fa70d6400fd4f3" title="Asynchronously signal the connection should be reconnected. ">fr_connection_signal_reconnect</a> this callback <em>MUST NOT</em> call <a class="el" href="trunk_8h.html#a93f664d4dc57935a73ef1855900f5a5b" title="Pop a request off a connection&#39;s pending queue. ">fr_trunk_connection_pop_request</a> again, and should immediately return.</p>
<p>If the protocol request data can't be written to the connection because the data is invalid or because some other error occurred, this callback should call <code>fr_trunk_request_signal_fail(treq)</code>, this callback may then continue popping/processing other requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>For timer management.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>The trunk connection to dequeue trunk requests from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>Connection to write the request to. Use conn-&gt;h to access the connection handle or file descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User context data passed to <a class="el" href="trunk_8h.html#a1327562f580bfb76e6a2839d8bd2f7ca" title="Allocate a new collection of connections. ">fr_trunk_alloc</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00463">463</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a21bbf23b7b4b866742a17610f5cdb465"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21bbf23b7b4b866742a17610f5cdb465">&#9670;&nbsp;</a></span>fr_trunk_request_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__request__pub__s">fr_trunk_request_pub_s</a> <a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00044">44</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a6e87c6d0e0c00fbd11252a2f78c32ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e87c6d0e0c00fbd11252a2f78c32ac8">&#9670;&nbsp;</a></span>fr_trunk_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="trunk_8h.html#structfr__trunk__pub__s">fr_trunk_pub_s</a> <a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00046">46</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a0d4512f57c53e6d70069a37c199abd1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d4512f57c53e6d70069a37c199abd1d">&#9670;&nbsp;</a></span>fr_trunk_cancel_reason_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trunk_8h.html#a0d4512f57c53e6d70069a37c199abd1d">fr_trunk_cancel_reason_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reasons for a request being cancelled. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0d4512f57c53e6d70069a37c199abd1dada4ddd486149ea11515afe0412d479f0"></a>FR_TRUNK_CANCEL_REASON_NONE&#160;</td><td class="fielddoc"><p>Request has not been cancelled. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0d4512f57c53e6d70069a37c199abd1da0797b8302a0cc45dad98b51ba93306c3"></a>FR_TRUNK_CANCEL_REASON_SIGNAL&#160;</td><td class="fielddoc"><p>Request cancelled due to a signal. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0d4512f57c53e6d70069a37c199abd1da5891c7698e7ccac08869644c51f28cbe"></a>FR_TRUNK_CANCEL_REASON_MOVE&#160;</td><td class="fielddoc"><p>Request cancelled because it's being moved. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0d4512f57c53e6d70069a37c199abd1dacca58320d90eeb1c2abe6318e8ac82fa"></a>FR_TRUNK_CANCEL_REASON_REQUEUE&#160;</td><td class="fielddoc"><p>A previously sent request is being requeued. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00055">55</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="aa9fdcb797f988454d499f3105d7754b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9fdcb797f988454d499f3105d7754b6">&#9670;&nbsp;</a></span>fr_trunk_connection_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trunk_8h.html#aa9fdcb797f988454d499f3105d7754b6">fr_trunk_connection_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>What type of I/O events the trunk connection is currently interested in receiving. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa9fdcb797f988454d499f3105d7754b6a3ca77ccd73e87fc86532543d34729971"></a>FR_TRUNK_CONN_EVENT_NONE&#160;</td><td class="fielddoc"><p>Don't notify the trunk on connection state changes. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9fdcb797f988454d499f3105d7754b6a72e382bc2f39e4f5628f1a761dee3435"></a>FR_TRUNK_CONN_EVENT_READ&#160;</td><td class="fielddoc"><p>Trunk should be notified if a connection is readable. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9fdcb797f988454d499f3105d7754b6a582ab69c363b72088131aca4986a69e3"></a>FR_TRUNK_CONN_EVENT_WRITE&#160;</td><td class="fielddoc"><p>Trunk should be notified if a connection is writable. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9fdcb797f988454d499f3105d7754b6aadd456e39b8e5c614225013a5cf8c21b"></a>FR_TRUNK_CONN_EVENT_BOTH&#160;</td><td class="fielddoc"><p>Trunk should be notified if a connection is readable or writable. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00065">65</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a210f9d82a7bc721184e1ff200a904a9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a210f9d82a7bc721184e1ff200a904a9c">&#9670;&nbsp;</a></span>fr_trunk_connection_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9c">fr_trunk_connection_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used for sanity checks and to track which list the connection is in. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca402154599f8b707f8a8fb2ab657c1824"></a>FR_TRUNK_CONN_HALTED&#160;</td><td class="fielddoc"><p>Halted, ready to be freed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9caf36bea677cb56d2765c56f845c25f7f4"></a>FR_TRUNK_CONN_INIT&#160;</td><td class="fielddoc"><p>In the initial state. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca6660254946fb8bfce739b8c61ef9707b"></a>FR_TRUNK_CONN_CONNECTING&#160;</td><td class="fielddoc"><p>Connection is connecting. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9cac7c33f0a87f6fcfb881173c6645af3f4"></a>FR_TRUNK_CONN_ACTIVE&#160;</td><td class="fielddoc"><p>Connection is connected and ready to service requests. </p>
<p>This is active and not 'connected', because a connection can be 'connected' and 'full' or 'connected' and 'active'. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca2b3577c9dae3011095caff68197134de"></a>FR_TRUNK_CONN_CLOSED&#160;</td><td class="fielddoc"><p>Connection was closed, either explicitly or due to failure. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca655d591ddd58d611ea9676cb33a522ee"></a>FR_TRUNK_CONN_FULL&#160;</td><td class="fielddoc"><p>Connection is full and can't accept any more requests. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca0a611f86a9e328975b0dba13614bb7a6"></a>FR_TRUNK_CONN_INACTIVE&#160;</td><td class="fielddoc"><p>Connection is inactive and can't accept any more requests. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca7764d96e34074f28314b2d90b2bf87a9"></a>FR_TRUNK_CONN_INACTIVE_DRAINING&#160;</td><td class="fielddoc"><p>Connection is inactive, can't accept any more requests, and will be closed once it has no more outstanding requests. </p>
<p>Connections in this state can transition to <a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9cabc3b5ee5689f1bdc9c103e2c66ce0268" title="Connection will be closed once it has no more outstanding requests, if it&#39;s not reactivated. ">FR_TRUNK_CONN_DRAINING</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9cabc3b5ee5689f1bdc9c103e2c66ce0268"></a>FR_TRUNK_CONN_DRAINING&#160;</td><td class="fielddoc"><p>Connection will be closed once it has no more outstanding requests, if it's not reactivated. </p>
</td></tr>
<tr><td class="fieldname"><a id="a210f9d82a7bc721184e1ff200a904a9ca6bc38d954880c3ade1c68cc77a2f0be4"></a>FR_TRUNK_CONN_DRAINING_TO_FREE&#160;</td><td class="fielddoc"><p>Connection will be closed once it has no more outstanding requests. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00080">80</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="af66b28863062ef87a38f7f4aa0cbfddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66b28863062ef87a38f7f4aa0cbfddf">&#9670;&nbsp;</a></span>fr_trunk_enqueue_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af66b28863062ef87a38f7f4aa0cbfddfa0a2c3c2b401958025b7b85c60d2ca091"></a>FR_TRUNK_ENQUEUE_IN_BACKLOG&#160;</td><td class="fielddoc"><p>Request should be enqueued in backlog. </p>
</td></tr>
<tr><td class="fieldname"><a id="af66b28863062ef87a38f7f4aa0cbfddfa9cb21f599a7f063e7ecfa747214862f1"></a>FR_TRUNK_ENQUEUE_OK&#160;</td><td class="fielddoc"><p>Operation was successful. </p>
</td></tr>
<tr><td class="fieldname"><a id="af66b28863062ef87a38f7f4aa0cbfddfa51de2488c03e6e53be534c107bd23c5c"></a>FR_TRUNK_ENQUEUE_NO_CAPACITY&#160;</td><td class="fielddoc"><p>At maximum number of connections, and no connection has capacity. </p>
</td></tr>
<tr><td class="fieldname"><a id="af66b28863062ef87a38f7f4aa0cbfddfac1651e8f2e1f492f0ba2c936306f65be"></a>FR_TRUNK_ENQUEUE_DST_UNAVAILABLE&#160;</td><td class="fielddoc"><p>Destination is down. </p>
</td></tr>
<tr><td class="fieldname"><a id="af66b28863062ef87a38f7f4aa0cbfddfafdc3908fa95280750cc878f181879feb"></a>FR_TRUNK_ENQUEUE_FAIL&#160;</td><td class="fielddoc"><p>General failure. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00128">128</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<a id="a44cddf26dcb250d3e42c7dc6d901ac4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44cddf26dcb250d3e42c7dc6d901ac4e">&#9670;&nbsp;</a></span>fr_trunk_request_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trunk_8h.html#a44cddf26dcb250d3e42c7dc6d901ac4e">fr_trunk_request_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used for sanity checks and to simplify freeing. </p>
<p>Allows us to track which </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eaf24d1e1b2957a1e9449554f5a700e4cd"></a>FR_TRUNK_REQUEST_STATE_INIT&#160;</td><td class="fielddoc"><p>Initial state. </p>
<p>Requests in this state were never assigned, and the request_t should not have been yielded. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eab110b8099ecdd6c6320d99610c6aa226"></a>FR_TRUNK_REQUEST_STATE_UNASSIGNED&#160;</td><td class="fielddoc"><p>Transition state - Request currently not assigned to any connection. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ea123d7eebf371db64caac50b6fdd37940"></a>FR_TRUNK_REQUEST_STATE_BACKLOG&#160;</td><td class="fielddoc"><p>In the backlog. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ea6917c522bcfe10926808d471619b1406"></a>FR_TRUNK_REQUEST_STATE_PENDING&#160;</td><td class="fielddoc"><p>In the queue of a connection and is pending writing. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eaedc7487a3aa5129b1d0dcdc4f4f2c480"></a>FR_TRUNK_REQUEST_STATE_PARTIAL&#160;</td><td class="fielddoc"><p>Some of the request was written to the socket, more of it should be written later. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ea422e01bf5682f49b0f9d68e3479dcdb4"></a>FR_TRUNK_REQUEST_STATE_SENT&#160;</td><td class="fielddoc"><p>Was written to a socket. Waiting for a response. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eaf731ae88e731b9a74c09a4622f215ccc"></a>FR_TRUNK_REQUEST_STATE_COMPLETE&#160;</td><td class="fielddoc"><p>The request is complete. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eacd96333aca17459c7b9c3f22bc88bb2a"></a>FR_TRUNK_REQUEST_STATE_FAILED&#160;</td><td class="fielddoc"><p>The request failed. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ea25c1a92690c8bf7e9075dd7848e0b1c0"></a>FR_TRUNK_REQUEST_STATE_CANCEL&#160;</td><td class="fielddoc"><p>A request on a particular socket was cancel. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4eac5a269422633bc02e329fb6d0f53e377"></a>FR_TRUNK_REQUEST_STATE_CANCEL_SENT&#160;</td><td class="fielddoc"><p>We've informed the remote server that the request has been cancelled. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ead903c0da5476e18e89192e0268321b32"></a>FR_TRUNK_REQUEST_STATE_CANCEL_PARTIAL&#160;</td><td class="fielddoc"><p>We partially wrote a cancellation request. </p>
</td></tr>
<tr><td class="fieldname"><a id="a44cddf26dcb250d3e42c7dc6d901ac4ead47437da5f4cedac3a3c54c9f6ab1c1c"></a>FR_TRUNK_REQUEST_STATE_CANCEL_COMPLETE&#160;</td><td class="fielddoc"><p>Remote server has acknowledged our cancellation. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="trunk_8h_source.html#l00141">141</a> of file <a class="el" href="trunk_8h_source.html">trunk.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1327562f580bfb76e6a2839d8bd2f7ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1327562f580bfb76e6a2839d8bd2f7ca">&#9670;&nbsp;</a></span>fr_trunk_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a>* fr_trunk_alloc </td>
          <td>(</td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8h.html#structfr__trunk__io__funcs__t">fr_trunk_io_funcs_t</a> const *&#160;</td>
          <td class="paramname"><em>funcs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8h.html#structfr__trunk__conf__t">fr_trunk_conf_t</a> const *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>log_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>uctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>delay_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a new collection of connections. </p>
<p>This function should be called first to allocate a new trunk connection.</p>
<p>After the trunk has been allocated, <a class="el" href="trunk_8c.html#a3414dcced7e253ba9d6c4e257b2fd10a" title="(Pre-)Allocate a new trunk request ">fr_trunk_request_alloc</a> and <a class="el" href="trunk_8c.html#a429d29c8a4a45f6aef6576c668cd9195" title="Enqueue a request that needs data written to the trunk. ">fr_trunk_request_enqueue</a> should be used to allocate memory for trunk requests, and pass a preq (protocol request) to the trunk for processing.</p>
<p>The trunk will then asynchronously process the request, writing the result to a specified rctx. See <a class="el" href="trunk_8c.html#a429d29c8a4a45f6aef6576c668cd9195" title="Enqueue a request that needs data written to the trunk. ">fr_trunk_request_enqueue</a> for more details.</p>
<dl class="section note"><dt>Note</dt><dd>Trunks may not be shared between multiple threads under any circumstances.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>To use for any memory allocations. Must be thread local. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>to use for I/O and timer events. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">funcs</td><td>Callback functions. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>Common user configurable parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">log_prefix</td><td>To prepend to global messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uctx</td><td>User data to pass to the alloc function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">delay_start</td><td>If true, then we will not spawn any connections until the first request is enqueued. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>New trunk handle on success.</li>
<li>NULL on error. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04491">4491</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a1327562f580bfb76e6a2839d8bd2f7ca_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a1327562f580bfb76e6a2839d8bd2f7ca_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a67e6ccfbaf63a45dbae642ebe11bfa0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67e6ccfbaf63a45dbae642ebe11bfa0e">&#9670;&nbsp;</a></span>fr_trunk_connection_count_by_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t fr_trunk_connection_count_by_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>conn_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the count number of connections in the specified states. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trunk</td><td>to retrieve counts for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_state</td><td>One or more <a class="el" href="trunk_8h.html#a210f9d82a7bc721184e1ff200a904a9c" title="Used for sanity checks and to track which list the connection is in. ">fr_trunk_connection_state_t</a> states or'd together. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of connections in the specified states. </dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02529">2529</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a67e6ccfbaf63a45dbae642ebe11bfa0e_cgraph.svg" width="352" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a67e6ccfbaf63a45dbae642ebe11bfa0e_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae9f688617896dc9418d6c972ddb01eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9f688617896dc9418d6c972ddb01eea">&#9670;&nbsp;</a></span>fr_trunk_connection_in_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fr_trunk_connection_in_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the trunk connection is in one of the specified states. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>To check state for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>True if trunk connection is in a particular state.</li>
<li>False if trunk connection is not in a particular state. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03673">3673</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>

</div>
</div>
<a id="afb4793e6c5950288e59a61b6cac95bbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4793e6c5950288e59a61b6cac95bbf">&#9670;&nbsp;</a></span>fr_trunk_connection_manage_schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_trunk_connection_manage_schedule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a trunk management event for the next time the event loop is executed. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04385">4385</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_afb4793e6c5950288e59a61b6cac95bbf_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_afb4793e6c5950288e59a61b6cac95bbf_icgraph.svg" width="100%" height="574"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aef7e0724f1e350d91411accf2f3d2b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7e0724f1e350d91411accf2f3d2b43">&#9670;&nbsp;</a></span>fr_trunk_connection_manage_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_manage_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow the trunk to open and close connections in response to load. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04364">4364</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>

</div>
</div>
<a id="a0d0e78d99fb37f2a5522253c311ffbd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d0e78d99fb37f2a5522253c311ffbd0">&#9670;&nbsp;</a></span>fr_trunk_connection_manage_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_manage_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the trunk from opening and closing connections in response to load. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04375">4375</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>

</div>
</div>
<a id="a410199905c8c7725d87a3d52c6580bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410199905c8c7725d87a3d52c6580bbe">&#9670;&nbsp;</a></span>fr_trunk_connection_pop_cancellation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_trunk_connection_pop_cancellation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **&#160;</td>
          <td class="paramname"><em>treq_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop a cancellation request off a connection's cancellation queue. </p>
<p>The request we return is advanced by the request moving out of the cancel state and into the cancel_sent or cancel_complete state.</p>
<p>One of these signalling functions must be called after the request has been popped:</p>
<ul>
<li><a class="el" href="trunk_8c.html#a11334935e79d8a96c5a0e77b37c93dd3" title="Signal that a remote server has been notified of the cancellation. ">fr_trunk_request_signal_cancel_sent</a> The remote datastore has been informed, but we need to wait for acknowledgement. The <a class="el" href="trunk_8h.html#a0e8895221d2c6ebbfb68318d77765ec2" title="Demultiplex on or more responses, reading them from a connection, decoding them, and matching them wi...">fr_trunk_request_demux_t</a> callback must handle the acks calling <a class="el" href="trunk_8c.html#af3a9f060ab945a71549c963550409e87" title="Signal that a remote server acked our cancellation. ">fr_trunk_request_signal_cancel_complete</a> when an ack is received.</li>
<li><a class="el" href="trunk_8c.html#af3a9f060ab945a71549c963550409e87" title="Signal that a remote server acked our cancellation. ">fr_trunk_request_signal_cancel_complete</a> The request was cancelled and we don't need to wait, clean it up immediately.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">treq_out</td><td>to process </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>Connection to drain cancellation request from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>1 if no more requests.</li>
<li>0 if a new request was written to treq_out.</li>
<li>-1 if the connection was previously freed. Caller <em>MUST NOT</em> touch any memory or requests associated with the connection.</li>
<li>-2 if called outside of the cancel muxer. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03496">3496</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a410199905c8c7725d87a3d52c6580bbe_cgraph.svg" width="291" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a410199905c8c7725d87a3d52c6580bbe_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a93f664d4dc57935a73ef1855900f5a5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f664d4dc57935a73ef1855900f5a5b">&#9670;&nbsp;</a></span>fr_trunk_connection_pop_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_trunk_connection_pop_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **&#160;</td>
          <td class="paramname"><em>treq_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop a request off a connection's pending queue. </p>
<p>The request we return is advanced by the request moving out of the partial or pending states, when the mux function signals us.</p>
<p>If the same request is returned again and again, it means the muxer isn't actually doing anything with the request we returned, and it's and error in the muxer code.</p>
<p>One of these signalling functions must be used after the request has been popped:</p>
<ul>
<li><a class="el" href="trunk_8c.html#a68df84abee6703937fcd841ef75797c7" title="Signal that a trunk request is complete. ">fr_trunk_request_signal_complete</a> The request was completed. Either we got a synchronous response, or we knew the response without contacting an external server (cache).</li>
<li><a class="el" href="trunk_8c.html#ac307f0d9ad6fd24637e1a27745521946" title="Signal that a trunk request failed. ">fr_trunk_request_signal_fail</a> Failed muxing the request due to a permanent issue, i.e. an invalid request.</li>
<li><a class="el" href="trunk_8c.html#a894959f53af966e88a7ea0fda87dc722" title="Signal a partial write. ">fr_trunk_request_signal_partial</a> Wrote part of a request. This request will be returned on the next call to this function so that the request_mux function can finish writing it. Only useful for stream type connections. Datagram type connections cannot have partial writes.</li>
<li><a class="el" href="trunk_8c.html#a4280399df4f7f50713e75983220b6893" title="Signal that the request was written to a connection successfully. ">fr_trunk_request_signal_sent</a> Successfully sent a request.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">treq_out</td><td>to process </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to pop a request from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>1 if no more requests.</li>
<li>0 if a new request was written to treq_out.</li>
<li>-1 if the connection was previously freed. Caller <em>MUST NOT</em> touch any memory or requests associated with the connection.</li>
<li>-2 if called outside of the muxer. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03544">3544</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a93f664d4dc57935a73ef1855900f5a5b_cgraph.svg" width="295" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a93f664d4dc57935a73ef1855900f5a5b_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a67069d7159583ef74d1cd099f2d07f30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67069d7159583ef74d1cd099f2d07f30">&#9670;&nbsp;</a></span>fr_trunk_connection_requests_requeue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t fr_trunk_connection_requests_requeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>states</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fail_bound</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move requests off of a connection and requeue elsewhere. </p>
<dl class="section note"><dt>Note</dt><dd>We don't re-queue on draining or draining to free, as requests should have already been moved off of te connection. It's also dangerous as the trunk management code main clean up a connection in this state when it's run on re-queue, and then the caller may try and access a now freed connection.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to move requests off of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">states</td><td>Only move requests in this state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>The maximum number of requests to dequeue. 0 for unlimited. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fail_bound</td><td>If true causes any requests bound to the connection to fail. If false bound requests will not be moved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of requests requeued. </dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01732">1732</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a67069d7159583ef74d1cd099f2d07f30_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a67069d7159583ef74d1cd099f2d07f30_icgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a1fa126ae1972a2089056405f2f7b8b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa126ae1972a2089056405f2f7b8b93">&#9670;&nbsp;</a></span>fr_trunk_connection_signal_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_signal_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal a trunk connection is no longer full. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03621">3621</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a1fa126ae1972a2089056405f2f7b8b93_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a1fa126ae1972a2089056405f2f7b8b93_icgraph.svg" width="100%" height="378"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9c2e24f88f4b711bc17d9723f53892a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c2e24f88f4b711bc17d9723f53892a1">&#9670;&nbsp;</a></span>fr_trunk_connection_signal_inactive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_signal_inactive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal a trunk connection cannot accept more requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03598">3598</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a9c2e24f88f4b711bc17d9723f53892a1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a9c2e24f88f4b711bc17d9723f53892a1_icgraph.svg" width="100%" height="416"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa38296145eead678186a6433af330b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa38296145eead678186a6433af330b35">&#9670;&nbsp;</a></span>fr_trunk_connection_signal_readable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_signal_readable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a trunk connection is readable. </p>
<p>Should be called from the 'read' I/O handler to signal that requests should be dequeued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03582">3582</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_aa38296145eead678186a6433af330b35_cgraph.svg" width="372" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_aa38296145eead678186a6433af330b35_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae261bef1f663eb4a697804302be97a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae261bef1f663eb4a697804302be97a93">&#9670;&nbsp;</a></span>fr_trunk_connection_signal_reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_signal_reconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="connection_8h.html#ad824f2a71886751c780c24f98b76aa41">fr_connection_reason_t</a>&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal a trunk connection is no longer viable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to signal. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reason</td><td>the connection is being reconnected. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03660">3660</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ae261bef1f663eb4a697804302be97a93_cgraph.svg" width="100%" height="588"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ae261bef1f663eb4a697804302be97a93_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae4622d45fe16ab018a7ff22f77bfcbcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4622d45fe16ab018a7ff22f77bfcbcd">&#9670;&nbsp;</a></span>fr_trunk_connection_signal_writable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_connection_signal_writable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a trunk connection is writable. </p>
<p>Should be called from the 'write' I/O handler to signal that requests can be enqueued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l03564">3564</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ae4622d45fe16ab018a7ff22f77bfcbcd_cgraph.svg" width="100%" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ae4622d45fe16ab018a7ff22f77bfcbcd_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a179c164ee54b5d5ddfe32387c595b371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179c164ee54b5d5ddfe32387c595b371">&#9670;&nbsp;</a></span>fr_trunk_reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_reconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>states</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="connection_8h.html#ad824f2a71886751c780c24f98b76aa41">fr_connection_reason_t</a>&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force the trunk to re-establish its connections. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trunk</td><td>to signal. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">states</td><td>One or more states or'd together. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reason</td><td>Why the connections are being signalled to reconnect. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04291">4291</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a179c164ee54b5d5ddfe32387c595b371_cgraph.svg" width="100%" height="588"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a179c164ee54b5d5ddfe32387c595b371_icgraph.svg" width="368" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8205c2bc837805a2634d3b6fee71bc03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8205c2bc837805a2634d3b6fee71bc03">&#9670;&nbsp;</a></span>fr_trunk_request_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a>* fr_trunk_request_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(Pre-)Allocate a new trunk request </p>
<p>If trunk-&gt;conf.req_pool_headers or trunk-&gt;conf.req_pool_size are not zero then the request will be a talloc pool, which can be used to hold the preq.</p>
<dl class="section note"><dt>Note</dt><dd>Do not use MEM to check the result of this allocated as it may fail for non-fatal reasons.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trunk</td><td>to add request to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>to wrap in a trunk request (treq). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>A newly allocated request.</li>
<li>NULL if too many requests are allocated. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02155">2155</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a8205c2bc837805a2634d3b6fee71bc03_cgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a8205c2bc837805a2634d3b6fee71bc03_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4a0a08064485793b003756b197ca6622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0a08064485793b003756b197ca6622">&#9670;&nbsp;</a></span>fr_trunk_request_count_by_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t fr_trunk_request_count_by_connection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> const *&#160;</td>
          <td class="paramname"><em>tconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>req_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the count number of requests associated with a trunk connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to return request count for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">req_state</td><td>One or more request states or'd together.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of requests in the specified states, associated with a tconn. </dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02553">2553</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a4a0a08064485793b003756b197ca6622_cgraph.svg" width="371" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a4a0a08064485793b003756b197ca6622_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a6dcfa1464e022ec96b90b8c975fe13b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dcfa1464e022ec96b90b8c975fe13b4">&#9670;&nbsp;</a></span>fr_trunk_request_count_by_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t fr_trunk_request_count_by_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>conn_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>req_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a count of requests on a connection in a specific state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trunk</td><td>to retrieve counts for. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_state</td><td>One or more connection states or'd together. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">req_state</td><td>One or more request states or'd together. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of requests in a particular state, on connection in a particular state. </dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04088">4088</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a6dcfa1464e022ec96b90b8c975fe13b4_cgraph.svg" width="574" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a6dcfa1464e022ec96b90b8c975fe13b4_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac02777d6e72e7f5ee93cf25b18b8d9e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02777d6e72e7f5ee93cf25b18b8d9e6">&#9670;&nbsp;</a></span>fr_trunk_request_enqueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a> fr_trunk_request_enqueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **&#160;</td>
          <td class="paramname"><em>treq_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>preq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enqueue a request that needs data written to the trunk. </p>
<p>When a request_t * needs to make an asynchronous request to an external datastore it should call this function, specifying a preq (protocol request) containing the data necessary to request information from the external datastore, and an rctx (resume ctx) used to hold the decoded response and/or any error codes.</p>
<p>After a treq is successfully enqueued it will either be assigned immediately to the pending queue of a connection, or if no connections are available, (depending on the trunk configuration) the treq will be placed in the trunk's global backlog.</p>
<p>After receiving a positive return code from this function the caller should immediately yield, to allow the various timers and I/O handlers that drive tconn (trunk connection) and treq state changes to be called.</p>
<p>When a tconn becomes writable (or the trunk is configured to be always writable) the <a class="el" href="trunk_8h.html#a23c85d155c4cc50fbb20754b035a8b85" title="Multiplex one or more requests into a single connection. ">fr_trunk_request_mux_t</a> callback will be called to dequeue, encode and send any pending requests for that tconn. The <a class="el" href="trunk_8h.html#a23c85d155c4cc50fbb20754b035a8b85" title="Multiplex one or more requests into a single connection. ">fr_trunk_request_mux_t</a> callback is also responsible for tracking the outbound requests to allow the <a class="el" href="trunk_8h.html#a0e8895221d2c6ebbfb68318d77765ec2" title="Demultiplex on or more responses, reading them from a connection, decoding them, and matching them wi...">fr_trunk_request_demux_t</a> callback to match inbound responses with the original treq. Once the <a class="el" href="trunk_8h.html#a23c85d155c4cc50fbb20754b035a8b85" title="Multiplex one or more requests into a single connection. ">fr_trunk_request_mux_t</a> callback is done processing the treq it signals what state the treq should enter next using one of the fr_trunk_request_signal_* functions.</p>
<p>When a tconn becomes readable the user specified <a class="el" href="trunk_8h.html#a0e8895221d2c6ebbfb68318d77765ec2" title="Demultiplex on or more responses, reading them from a connection, decoding them, and matching them wi...">fr_trunk_request_demux_t</a> callback is called to process any responses, match them with the original treq. and signal what state they should enter next using one of the fr_trunk_request_signal_* functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">treq_out</td><td>A trunk request handle. If the memory pointed to is NULL, a new treq will be allocated. Otherwise treq should point to memory allocated with fr_trunk_request_alloc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trunk</td><td>to enqueue request on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>to enqueue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preq</td><td>Protocol request to write out. Will be freed when treq is freed. Should ideally be parented by the treq if possible. Use <a class="el" href="trunk_8c.html#a3414dcced7e253ba9d6c4e257b2fd10a" title="(Pre-)Allocate a new trunk request ">fr_trunk_request_alloc</a> for pre-allocation of the treq. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>The resume context to write any result to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FR_TRUNK_ENQUEUE_OK.</li>
<li>FR_TRUNK_ENQUEUE_IN_BACKLOG.</li>
<li>FR_TRUNK_ENQUEUE_NO_CAPACITY.</li>
<li>FR_TRUNK_ENQUEUE_DST_UNAVAILABLE</li>
<li>FR_TRUNK_ENQUEUE_FAIL </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02267">2267</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ac02777d6e72e7f5ee93cf25b18b8d9e6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ac02777d6e72e7f5ee93cf25b18b8d9e6_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9e426e665d3583a76e1e383ebd778e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e426e665d3583a76e1e383ebd778e01">&#9670;&nbsp;</a></span>fr_trunk_request_enqueue_on_conn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a> fr_trunk_request_enqueue_on_conn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **&#160;</td>
          <td class="paramname"><em>treq_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#aee0dc607323967c0febcf18667763f39">fr_trunk_connection_t</a> *&#160;</td>
          <td class="paramname"><em>tconn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>preq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ignore_limits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enqueue additional requests on a specific connection. </p>
<p>This may be used to create a series of requests on a single connection, or to generate in-band status checks.</p>
<dl class="section note"><dt>Note</dt><dd>If conf-&gt;always_writable, then the muxer will be called immediately. The caller must be able to handle multiple calls to its muxer gracefully.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">treq_out</td><td>A trunk request handle. If the memory pointed to is NULL, a new treq will be allocated. Otherwise treq should point to memory allocated with fr_trunk_request_alloc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tconn</td><td>to enqueue request on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>to enqueue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">preq</td><td>Protocol request to write out. Will be freed when treq is freed. Should ideally be parented by the treq if possible. Use <a class="el" href="trunk_8c.html#a3414dcced7e253ba9d6c4e257b2fd10a" title="(Pre-)Allocate a new trunk request ">fr_trunk_request_alloc</a> for pre-allocation of the treq. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>The resume context to write any result to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ignore_limits</td><td>Ignore max_req_per_conn. Useful to force status checks through even if the connection is at capacity. Will also allow enqueuing on "inactive", "draining", "draining-to-free" connections. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FR_TRUNK_ENQUEUE_OK.</li>
<li>FR_TRUNK_ENQUEUE_NO_CAPACITY - At max_req_per_conn_limit</li>
<li>FR_TRUNK_ENQUEUE_DST_UNAVAILABLE - Connection cannot service requests. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02415">2415</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a9e426e665d3583a76e1e383ebd778e01_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a9e426e665d3583a76e1e383ebd778e01_icgraph.svg" width="100%" height="442"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a42bf155fe820d87b93f6127c1b957a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bf155fe820d87b93f6127c1b957a18">&#9670;&nbsp;</a></span>fr_trunk_request_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> **&#160;</td>
          <td class="paramname"><em>treq_to_free</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the trunk request is freed then update the target requests. </p>
<p>gperftools showed calling the request free function directly was slightly faster than using talloc_free.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq_to_free</td><td>request. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02003">2003</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a42bf155fe820d87b93f6127c1b957a18_cgraph.svg" width="100%" height="514"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-40" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-40-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-40-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-40-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a42bf155fe820d87b93f6127c1b957a18_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a72e34d33ea58c5c62d64d12c1620b819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e34d33ea58c5c62d64d12c1620b819">&#9670;&nbsp;</a></span>fr_trunk_request_requeue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trunk_8h.html#af66b28863062ef87a38f7f4aa0cbfddf">fr_trunk_enqueue_t</a> fr_trunk_request_requeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-enqueue a request on the same connection. </p>
<p>If the treq has been sent, we assume that we're being signalled to requeue because something outside of the trunk API has determined that a retransmission is required. The easiest way to perform that retransmission is to clean up any tracking information for the request, and the requeue it for transmission.</p>
<p>IF re-queueing fails, the request will enter the fail state. It should not be accessed if this occurs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to requeue (retransmit). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>FR_TRUNK_ENQUEUE_OK.</li>
<li>FR_TRUNK_ENQUEUE_DST_UNAVAILABLE - Connection cannot service requests.</li>
<li>FR_TRUNK_ENQUEUE_FAIL - Request isn't in a valid state to be reassigned. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02354">2354</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-41" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-41-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-41-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-41-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a72e34d33ea58c5c62d64d12c1620b819_cgraph.svg" width="100%" height="556"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-42" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-42-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-42-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-42-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a72e34d33ea58c5c62d64d12c1620b819_icgraph.svg" width="100%" height="442"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a22df6123e7ec90e1fafbdab2ed388774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22df6123e7ec90e1fafbdab2ed388774">&#9670;&nbsp;</a></span>fr_trunk_request_signal_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel a trunk request. </p>
<p>treq can be in any state, but requests to cancel if the treq is not in the FR_TRUNK_REQUEST_STATE_PARTIAL or FR_TRUNK_REQUEST_STATE_SENT state will be ignored.</p>
<p>The complete or failed callbacks will not be called here, as it's assumed the request_t * is now inviable as it's being cancelled.</p>
<p>The free function however, is called, and that should be used to perform necessary cleanup.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01846">1846</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-43" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-43-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-43-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-43-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a22df6123e7ec90e1fafbdab2ed388774_cgraph.svg" width="100%" height="581"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-44" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-44-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-44-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-44-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a22df6123e7ec90e1fafbdab2ed388774_icgraph.svg" width="399" height="220"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af3a9f060ab945a71549c963550409e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a9f060ab945a71549c963550409e87">&#9670;&nbsp;</a></span>fr_trunk_request_signal_cancel_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_cancel_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a remote server acked our cancellation. </p>
<p>Called from request_demux to indicate that it got an ack for the cancellation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01978">1978</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-45" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-45-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-45-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-45-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_af3a9f060ab945a71549c963550409e87_cgraph.svg" width="100%" height="419"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-46" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-46-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-46-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-46-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_af3a9f060ab945a71549c963550409e87_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="af5490c0467c8046f8af5576e0cca9b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5490c0467c8046f8af5576e0cca9b95">&#9670;&nbsp;</a></span>fr_trunk_request_signal_cancel_partial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_cancel_partial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal a partial cancel write. </p>
<p>Where there's high load, and the outbound write buffer is full</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01930">1930</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-47" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-47-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-47-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-47-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_af5490c0467c8046f8af5576e0cca9b95_cgraph.svg" width="354" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-48" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-48-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-48-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-48-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_af5490c0467c8046f8af5576e0cca9b95_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a11334935e79d8a96c5a0e77b37c93dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11334935e79d8a96c5a0e77b37c93dd3">&#9670;&nbsp;</a></span>fr_trunk_request_signal_cancel_sent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_cancel_sent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a remote server has been notified of the cancellation. </p>
<p>Called from request_cancel_mux to indicate that the datastore has been informed that the response is no longer needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01954">1954</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-49" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-49-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-49-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-49-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a11334935e79d8a96c5a0e77b37c93dd3_cgraph.svg" width="100%" height="451"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-50" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-50-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-50-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-50-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a11334935e79d8a96c5a0e77b37c93dd3_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a68df84abee6703937fcd841ef75797c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68df84abee6703937fcd841ef75797c7">&#9670;&nbsp;</a></span>fr_trunk_request_signal_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_complete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a trunk request is complete. </p>
<p>The API client will be informed that the request is now complete. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01794">1794</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-51" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-51-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-51-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-51-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a68df84abee6703937fcd841ef75797c7_cgraph.svg" width="100%" height="419"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-52" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-52-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-52-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-52-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a68df84abee6703937fcd841ef75797c7_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac307f0d9ad6fd24637e1a27745521946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac307f0d9ad6fd24637e1a27745521946">&#9670;&nbsp;</a></span>fr_trunk_request_signal_fail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_fail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that a trunk request failed. </p>
<p>The API client will be informed that the request has failed. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01826">1826</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-53" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-53-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-53-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-53-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ac307f0d9ad6fd24637e1a27745521946_cgraph.svg" width="100%" height="419"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-54" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-54-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-54-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-54-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_ac307f0d9ad6fd24637e1a27745521946_icgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a894959f53af966e88a7ea0fda87dc722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a894959f53af966e88a7ea0fda87dc722">&#9670;&nbsp;</a></span>fr_trunk_request_signal_partial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_partial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal a partial write. </p>
<p>Where there's high load, and the outbound write buffer is full</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01751">1751</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-55" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-55-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-55-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-55-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="trunk_8h_a894959f53af966e88a7ea0fda87dc722_cgraph.svg" width="354" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-56" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-56-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-56-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-56-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a894959f53af966e88a7ea0fda87dc722_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4280399df4f7f50713e75983220b6893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4280399df4f7f50713e75983220b6893">&#9670;&nbsp;</a></span>fr_trunk_request_signal_sent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_signal_sent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> *&#160;</td>
          <td class="paramname"><em>treq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal that the request was written to a connection successfully. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">treq</td><td>to signal state change for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l01772">1772</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-57" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-57-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-57-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-57-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a4280399df4f7f50713e75983220b6893_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-58" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-58-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-58-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-58-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a4280399df4f7f50713e75983220b6893_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a745237c24d6896132622e9e304680260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a745237c24d6896132622e9e304680260">&#9670;&nbsp;</a></span>fr_trunk_request_state_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fr_trunk_request_state_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfr__log__t.html">fr_log_t</a> const *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2util_2log_8h.html#affd805145b7ef5f1edc308ebb525dd78">fr_log_type_t</a>&#160;</td>
          <td class="paramname"><em>log_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#ac3eb131a80a4eb550e2f859d599144ea">fr_trunk_request_t</a> const *&#160;</td>
          <td class="paramname"><em>treq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l02502">2502</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-59" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-59-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-59-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-59-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a745237c24d6896132622e9e304680260_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-60" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-60-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-60-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-60-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a745237c24d6896132622e9e304680260_icgraph.svg" width="100%" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a055d797a7b5348770b776a633780ee1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a055d797a7b5348770b776a633780ee1d">&#9670;&nbsp;</a></span>fr_trunk_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fr_trunk_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trunk_8c.html#a989e62923fa467b83f977ae0a44ab51d">fr_trunk_t</a> *&#160;</td>
          <td class="paramname"><em>trunk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the trunk running. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l04330">4330</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>
<div id="dynsection-61" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-61-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-61-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-61-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a055d797a7b5348770b776a633780ee1d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div id="dynsection-62" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-62-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-62-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-62-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="trunk_8h_a055d797a7b5348770b776a633780ee1d_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8873963fb2c86e66c2b590b21c9c716e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8873963fb2c86e66c2b590b21c9c716e">&#9670;&nbsp;</a></span>fr_trunk_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cf__parse_8h.html#structCONF__PARSER">CONF_PARSER</a> const fr_trunk_config[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Config parser definitions to populate a <a class="el" href="trunk_8h.html#structfr__trunk__conf__t" title="Common configuration parameters for a trunk. ">fr_trunk_conf_t</a>. </p>

<p class="definition">Definition at line <a class="el" href="trunk_8c_source.html#l00289">289</a> of file <a class="el" href="trunk_8c_source.html">trunk.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 14 2020 17:33:54 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
