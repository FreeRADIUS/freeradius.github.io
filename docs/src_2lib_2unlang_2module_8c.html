<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/runner/work/freeradius-server/freeradius-server/src/lib/unlang/module.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="freeradius.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="dir_8bd9041bb00c2961befd0c0eb73aa27b.html">unlang</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">module.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines functions for calling modules asynchronously.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;freeradius-devel/server/cond.h&gt;</code><br />
<code>#include &lt;freeradius-devel/server/modpriv.h&gt;</code><br />
<code>#include &lt;freeradius-devel/server/module.h&gt;</code><br />
<code>#include &lt;freeradius-devel/server/request_data.h&gt;</code><br />
<code>#include &lt;freeradius-devel/unlang/base.h&gt;</code><br />
<code>#include &quot;<a class="el" href="module__priv_8h_source.html">module_priv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="subrequest__priv_8h_source.html">subrequest_priv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="unlang__priv_8h_source.html">unlang_priv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="unlang_2tmpl_8h_source.html">tmpl.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for module.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c__incl.svg" width="100%" height="551"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="src_2lib_2unlang_2module_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structunlang__module__event__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t">unlang_module_event_t</a></td></tr>
<tr class="memdesc:structunlang__module__event__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrap an <a class="el" href="event_8h.html#a27c6e7349925b4c501d00d0f3f8d1550" title="An opaque timer handle. ">fr_event_timer_t</a> providing data needed for unlang events.  <a href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t">More...</a><br /></td></tr>
<tr class="separator:structunlang__module__event__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3925607c7455bb0f8c9fbf06f474adda"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a3925607c7455bb0f8c9fbf06f474adda">_unlang_event_free</a> (<a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t">unlang_module_event_t</a> *ev)</td></tr>
<tr class="memdesc:a3925607c7455bb0f8c9fbf06f474adda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an unlang event, removing it from the request's event loop.  <a href="#a3925607c7455bb0f8c9fbf06f474adda">More...</a><br /></td></tr>
<tr class="separator:a3925607c7455bb0f8c9fbf06f474adda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c3fdc6174caae2812982ce4ff078c8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a90c3fdc6174caae2812982ce4ff078c8">safe_lock</a> (<a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *instance)</td></tr>
<tr class="separator:a90c3fdc6174caae2812982ce4ff078c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46c0326fe151b89c713241460595761"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#ab46c0326fe151b89c713241460595761">safe_unlock</a> (<a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *instance)</td></tr>
<tr class="separator:ab46c0326fe151b89c713241460595761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae777f30ad3fd0e39406da226ce23a8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a2ae777f30ad3fd0e39406da226ce23a8">unlang_event_fd_error_handler</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, int fd, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int flags, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int fd_errno, void *ctx)</td></tr>
<tr class="memdesc:a2ae777f30ad3fd0e39406da226ce23a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the callback registered for an I/O error event.  <a href="#a2ae777f30ad3fd0e39406da226ce23a8">More...</a><br /></td></tr>
<tr class="separator:a2ae777f30ad3fd0e39406da226ce23a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae52cad548d260c51ae44ee28bbad744d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#ae52cad548d260c51ae44ee28bbad744d">unlang_event_fd_read_handler</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, int fd, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int flags, void *ctx)</td></tr>
<tr class="memdesc:ae52cad548d260c51ae44ee28bbad744d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the callback registered for a read I/O event.  <a href="#ae52cad548d260c51ae44ee28bbad744d">More...</a><br /></td></tr>
<tr class="separator:ae52cad548d260c51ae44ee28bbad744d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a756283304b9318331b51be659f727"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a49a756283304b9318331b51be659f727">unlang_event_fd_write_handler</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, int fd, <a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int flags, void *ctx)</td></tr>
<tr class="memdesc:a49a756283304b9318331b51be659f727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the callback registered for a write I/O event.  <a href="#a49a756283304b9318331b51be659f727">More...</a><br /></td></tr>
<tr class="separator:a49a756283304b9318331b51be659f727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ae86de14150b496eb2d1f0e5d06882"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#af5ae86de14150b496eb2d1f0e5d06882">unlang_module</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *p_result, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request)</td></tr>
<tr class="separator:af5ae86de14150b496eb2d1f0e5d06882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031a449b00a2c7c9293ff7ad243f2c9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a031a449b00a2c7c9293ff7ad243f2c9e">unlang_module_event_timeout_handler</a> (<a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *el, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> now, void *ctx)</td></tr>
<tr class="memdesc:a031a449b00a2c7c9293ff7ad243f2c9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the callback registered for a timeout event.  <a href="#a031a449b00a2c7c9293ff7ad243f2c9e">More...</a><br /></td></tr>
<tr class="separator:a031a449b00a2c7c9293ff7ad243f2c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac345d6c0c436f5d20f7e373a8b18d0cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#ac345d6c0c436f5d20f7e373a8b18d0cb">unlang_module_fd_add</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a> read, <a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a> write, <a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a> error, void const *ctx, int fd)</td></tr>
<tr class="memdesc:ac345d6c0c436f5d20f7e373a8b18d0cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback for the request.  <a href="#ac345d6c0c436f5d20f7e373a8b18d0cb">More...</a><br /></td></tr>
<tr class="separator:ac345d6c0c436f5d20f7e373a8b18d0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe719d12ad2365c0c4a466f3db5d684f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#afe719d12ad2365c0c4a466f3db5d684f">unlang_module_fd_delete</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void const *ctx, int fd)</td></tr>
<tr class="memdesc:afe719d12ad2365c0c4a466f3db5d684f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a previously set file descriptor callback.  <a href="#afe719d12ad2365c0c4a466f3db5d684f">More...</a><br /></td></tr>
<tr class="separator:afe719d12ad2365c0c4a466f3db5d684f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacac2f2ef83343ae1a0651c3e709fa7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#aacac2f2ef83343ae1a0651c3e709fa7f">unlang_module_init</a> (void)</td></tr>
<tr class="separator:aacac2f2ef83343ae1a0651c3e709fa7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ea45545fcba322246e22515298e97e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#ac6ea45545fcba322246e22515298e97e">unlang_module_push</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *<a class="el" href="value_8h.html#af17d2d4e72bd60de680d3f4a29a1275f">out</a>, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *module_instance, <a class="el" href="server_2module_8h.html#af80b8d62962b7d1c1e3b0af13cd479d0">module_method_t</a> method, bool top_frame)</td></tr>
<tr class="memdesc:ac6ea45545fcba322246e22515298e97e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a module or submodule onto the stack for evaluation.  <a href="#ac6ea45545fcba322246e22515298e97e">More...</a><br /></td></tr>
<tr class="separator:ac6ea45545fcba322246e22515298e97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e539fb86ff1ad93cd142a7443f0fa61"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a7e539fb86ff1ad93cd142a7443f0fa61">unlang_module_resume</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *p_result, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request)</td></tr>
<tr class="memdesc:a7e539fb86ff1ad93cd142a7443f0fa61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper to call a module's resumption function.  <a href="#a7e539fb86ff1ad93cd142a7443f0fa61">More...</a><br /></td></tr>
<tr class="separator:a7e539fb86ff1ad93cd142a7443f0fa61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785cafdb7d6144e87f0875e3d394d872"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a785cafdb7d6144e87f0875e3d394d872">unlang_module_resume_final</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *p_result, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request)</td></tr>
<tr class="memdesc:a785cafdb7d6144e87f0875e3d394d872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return UNLANG_CALCULATE_RESULT only for async async calls.  <a href="#a785cafdb7d6144e87f0875e3d394d872">More...</a><br /></td></tr>
<tr class="separator:a785cafdb7d6144e87f0875e3d394d872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630369b7f8cbd6e00042f2ca153f241e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a630369b7f8cbd6e00042f2ca153f241e">unlang_module_signal</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="signal_8h.html#a8074925f4834af37765d74bd20cdd8ce">fr_state_signal_t</a> action)</td></tr>
<tr class="memdesc:a630369b7f8cbd6e00042f2ca153f241e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a signal (usually stop) to a request.  <a href="#a630369b7f8cbd6e00042f2ca153f241e">More...</a><br /></td></tr>
<tr class="separator:a630369b7f8cbd6e00042f2ca153f241e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aaf3de74431d87c8654184f91e7f912"><td class="memItemLeft" align="right" valign="top"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a0aaf3de74431d87c8654184f91e7f912">unlang_module_subrequest_alloc</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *parent, <a class="el" href="dict_8h.html#a8a299a18628c5635c7e9655343bcfceb">fr_dict_t</a> const *namespace)</td></tr>
<tr class="memdesc:a0aaf3de74431d87c8654184f91e7f912"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a subrequest to run through a virtual server at some point in the future.  <a href="#a0aaf3de74431d87c8654184f91e7f912">More...</a><br /></td></tr>
<tr class="separator:a0aaf3de74431d87c8654184f91e7f912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6d57c1f4e694190287b8167e0e946a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#ace6d57c1f4e694190287b8167e0e946a">unlang_module_timeout_add</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="unlang_2module_8h.html#a6a3aca8c7e2e13f16f0be0ed7d779bf2">unlang_module_timeout_t</a> callback, void const *ctx, <a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a> when)</td></tr>
<tr class="memdesc:ace6d57c1f4e694190287b8167e0e946a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a timeout for the request.  <a href="#ace6d57c1f4e694190287b8167e0e946a">More...</a><br /></td></tr>
<tr class="separator:ace6d57c1f4e694190287b8167e0e946a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3949ac626f5a3b8257f13f851501a03e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a3949ac626f5a3b8257f13f851501a03e">unlang_module_timeout_delete</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, void const *ctx)</td></tr>
<tr class="memdesc:a3949ac626f5a3b8257f13f851501a03e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a previously set timeout callback.  <a href="#a3949ac626f5a3b8257f13f851501a03e">More...</a><br /></td></tr>
<tr class="separator:a3949ac626f5a3b8257f13f851501a03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa828488a36bd5c78545c095a8e04096e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#aa828488a36bd5c78545c095a8e04096e">unlang_module_yield</a> (<a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a> resume, <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a> signal, void *rctx)</td></tr>
<tr class="memdesc:aa828488a36bd5c78545c095a8e04096e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield a request back to the interpreter from within a module.  <a href="#aa828488a36bd5c78545c095a8e04096e">More...</a><br /></td></tr>
<tr class="separator:aa828488a36bd5c78545c095a8e04096e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af27356eb341612e8aeecbc224d89c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a6af27356eb341612e8aeecbc224d89c4">unlang_module_yield_to_section</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *p_result, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="cf__util_8h.html#a0f39d8043920472ea4c687c97f7173b3">CONF_SECTION</a> *subcs, <a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> default_rcode, <a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a> resume, <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a> signal, void *rctx)</td></tr>
<tr class="separator:a6af27356eb341612e8aeecbc224d89c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242ed1c8d3c8ce6174df1e79a99fbbe9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a242ed1c8d3c8ce6174df1e79a99fbbe9">unlang_module_yield_to_subrequest</a> (<a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *<a class="el" href="value_8h.html#af17d2d4e72bd60de680d3f4a29a1275f">out</a>, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *child, <a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a> resume, <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a> signal, <a class="el" href="subrequest_8h.html#structunlang__subrequest__session__t">unlang_subrequest_session_t</a> const *session, void *rctx)</td></tr>
<tr class="memdesc:a242ed1c8d3c8ce6174df1e79a99fbbe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield, spawning a child request, and resuming once the child request is complete.  <a href="#a242ed1c8d3c8ce6174df1e79a99fbbe9">More...</a><br /></td></tr>
<tr class="separator:a242ed1c8d3c8ce6174df1e79a99fbbe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94769c1912b28739af384f1697d3cb9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a94769c1912b28739af384f1697d3cb9f">unlang_module_yield_to_tmpl</a> (TALLOC_CTX *ctx, <a class="el" href="value_8h.html#a4a9e69e78ad1a81da0976e8f29a4e444">fr_value_box_t</a> **<a class="el" href="value_8h.html#af17d2d4e72bd60de680d3f4a29a1275f">out</a>, int *status, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="server_2tmpl_8h.html#ab59ad3d0e1f259dd7dff0be6d621f691">tmpl_t</a> const *vpt, <a class="el" href="util_2pair_8h.html#a9ab81fd13d950dc8af802107f161d222">fr_pair_t</a> *vps, <a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a> resume, <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a> signal, void *rctx)</td></tr>
<tr class="memdesc:a94769c1912b28739af384f1697d3cb9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a pre-compiled tmpl and resumption state onto the stack for evaluation.  <a href="#a94769c1912b28739af384f1697d3cb9f">More...</a><br /></td></tr>
<tr class="separator:a94769c1912b28739af384f1697d3cb9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a765cb3bdd30e8e4d14bec89fa3e39f2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="src_2lib_2unlang_2module_8c.html#a765cb3bdd30e8e4d14bec89fa3e39f2f">unlang_module_yield_to_xlat</a> (TALLOC_CTX *ctx, <a class="el" href="value_8h.html#a4a9e69e78ad1a81da0976e8f29a4e444">fr_value_box_t</a> **<a class="el" href="value_8h.html#af17d2d4e72bd60de680d3f4a29a1275f">out</a>, <a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *request, <a class="el" href="xlat_8h.html#a1231cafee784e258e923550326d7a6b6">xlat_exp_t</a> const *exp, <a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a> resume, <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a> signal, void *rctx)</td></tr>
<tr class="memdesc:a765cb3bdd30e8e4d14bec89fa3e39f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a pre-compiled xlat and resumption state onto the stack for evaluation.  <a href="#a765cb3bdd30e8e4d14bec89fa3e39f2f">More...</a><br /></td></tr>
<tr class="separator:a765cb3bdd30e8e4d14bec89fa3e39f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines functions for calling modules asynchronously. </p>
<dl class="section rcs"><dt>Id</dt><dd>a1b9f8a804e9a97c9fa6177a31b012f73cb24c4d </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2018 The FreeRADIUS server project </dd>
<dd>
2018 Arran Cudbard-Bell (<a href="#" onclick="location.href='mai'+'lto:'+'a.c'+'ud'+'bar'+'db'+'@fr'+'ee'+'rad'+'iu'+'s.o'+'rg'; return false;">a.cud<span style="display: none;">.nosp@m.</span>bard<span style="display: none;">.nosp@m.</span>b@fre<span style="display: none;">.nosp@m.</span>erad<span style="display: none;">.nosp@m.</span>ius.o<span style="display: none;">.nosp@m.</span>rg</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structunlang__module__event__t" id="structunlang__module__event__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structunlang__module__event__t">&#9670;&nbsp;</a></span>unlang_module_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct unlang_module_event_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Wrap an <a class="el" href="event_8h.html#a27c6e7349925b4c501d00d0f3f8d1550" title="An opaque timer handle. ">fr_event_timer_t</a> providing data needed for unlang events. </p>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00044">44</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for unlang_module_event_t:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="structunlang__module__event__t__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a29c00cd59f8e1e3c3cb81af14a55af19"></a>void const  *</td>
<td class="fieldname">
ctx</td>
<td class="fielddoc">
ctx data to pass to callbacks. </td></tr>
<tr><td class="fieldtype">
<a id="adb190b7c58843a59036122c52634e17f"></a><a class="el" href="event_8h.html#a27c6e7349925b4c501d00d0f3f8d1550">fr_event_timer_t</a> const  *</td>
<td class="fieldname">
ev</td>
<td class="fielddoc">
Event in this worker's event heap. </td></tr>
<tr><td class="fieldtype">
<a id="a61d3d52bc076596f4e59f2121b2fdb1b"></a>int</td>
<td class="fieldname">
fd</td>
<td class="fielddoc">
File descriptor to wait on. </td></tr>
<tr><td class="fieldtype">
<a id="a993f505fceee8e2457cdcef4c9d43da4"></a><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a></td>
<td class="fieldname">
fd_error</td>
<td class="fielddoc">
Function to call when FD has errored. </td></tr>
<tr><td class="fieldtype">
<a id="a1f21947390db1b28c7ef1c1723b9f352"></a><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a></td>
<td class="fieldname">
fd_read</td>
<td class="fielddoc">
Function to call when FD is readable. </td></tr>
<tr><td class="fieldtype">
<a id="af096db030cd140dbb55c1a8d8c6a6d7e"></a><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a></td>
<td class="fieldname">
fd_write</td>
<td class="fielddoc">
Function to call when FD is writable. </td></tr>
<tr><td class="fieldtype">
<a id="a43c7bf60e0c0785715fb6e0fcdd6c960"></a>void const  *</td>
<td class="fieldname">
inst</td>
<td class="fielddoc">
Module instance to pass to callbacks. </td></tr>
<tr><td class="fieldtype">
<a id="a2f8cbb914275acfca96a32213ef9bd47"></a><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *</td>
<td class="fieldname">
request</td>
<td class="fielddoc">
Request this event pertains to. </td></tr>
<tr><td class="fieldtype">
<a id="ab096ad64b6cd476e340380592b5814d1"></a>void *</td>
<td class="fieldname">
thread</td>
<td class="fielddoc">
Thread specific module instance. </td></tr>
<tr><td class="fieldtype">
<a id="a7262f05440fbbc120755cd3add2ca1e9"></a><a class="el" href="unlang_2module_8h.html#a6a3aca8c7e2e13f16f0be0ed7d779bf2">unlang_module_timeout_t</a></td>
<td class="fieldname">
timeout</td>
<td class="fielddoc">
Function to call on timeout. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3925607c7455bb0f8c9fbf06f474adda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3925607c7455bb0f8c9fbf06f474adda">&#9670;&nbsp;</a></span>_unlang_event_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int _unlang_event_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t">unlang_module_event_t</a> *&#160;</td>
          <td class="paramname"><em>ev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees an unlang event, removing it from the request's event loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ev</td><td>The event to free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00084">84</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a3925607c7455bb0f8c9fbf06f474adda_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a90c3fdc6174caae2812982ce4ff078c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c3fdc6174caae2812982ce4ff078c8">&#9670;&nbsp;</a></span>safe_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00586">586</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="ab46c0326fe151b89c713241460595761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab46c0326fe151b89c713241460595761">&#9670;&nbsp;</a></span>safe_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00594">594</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="a2ae777f30ad3fd0e39406da226ce23a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae777f30ad3fd0e39406da226ce23a8">&#9670;&nbsp;</a></span>unlang_event_fd_error_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlang_event_fd_error_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int&#160;</td>
          <td class="paramname"><em>fd_errno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call the callback registered for an I/O error event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>containing the event (not passed to the callback). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>the I/O event occurred on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>from kevent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd_errno</td><td>from kevent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t" title="Wrap an fr_event_timer_t providing data needed for unlang events. ">unlang_module_event_t</a> structure holding callbacks. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00223">223</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="ae52cad548d260c51ae44ee28bbad744d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae52cad548d260c51ae44ee28bbad744d">&#9670;&nbsp;</a></span>unlang_event_fd_read_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlang_event_fd_read_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call the callback registered for a read I/O event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>containing the event (not passed to the callback). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>the I/O event occurred on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>from kevent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t" title="Wrap an fr_event_timer_t providing data needed for unlang events. ">unlang_module_event_t</a> structure holding callbacks. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00064">64</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="a49a756283304b9318331b51be659f727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49a756283304b9318331b51be659f727">&#9670;&nbsp;</a></span>unlang_event_fd_write_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlang_event_fd_write_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call the callback registered for a write I/O event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>containing the event (not passed to the callback). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>the I/O event occurred on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>from kevent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t" title="Wrap an fr_event_timer_t providing data needed for unlang events. ">unlang_module_event_t</a> structure holding callbacks. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00201">201</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="af5ae86de14150b496eb2d1f0e5d06882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ae86de14150b496eb2d1f0e5d06882">&#9670;&nbsp;</a></span>unlang_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>p_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00776">776</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_af5ae86de14150b496eb2d1f0e5d06882_cgraph.svg" width="551" height="340"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a031a449b00a2c7c9293ff7ad243f2c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031a449b00a2c7c9293ff7ad243f2c9e">&#9670;&nbsp;</a></span>unlang_module_event_timeout_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlang_module_event_timeout_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="build_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> <a class="el" href="event_8h.html#ada9c8bff012ba3155d29668ee8af9f37">fr_event_list_t</a> *&#160;</td>
          <td class="paramname"><em>el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call the callback registered for a timeout event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">el</td><td>the event timer was inserted into. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>The current time, as held by the event_list. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td><a class="el" href="src_2lib_2unlang_2module_8c.html#structunlang__module__event__t" title="Wrap an fr_event_timer_t providing data needed for unlang events. ">unlang_module_event_t</a> structure holding callbacks. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00109">109</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="ac345d6c0c436f5d20f7e373a8b18d0cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac345d6c0c436f5d20f7e373a8b18d0cb">&#9670;&nbsp;</a></span>unlang_module_fd_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unlang_module_fd_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a>&#160;</td>
          <td class="paramname"><em>read</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a>&#160;</td>
          <td class="paramname"><em>write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#ad8e8f9d58e345ed73083819d68f240c7">unlang_module_fd_event_t</a>&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback for the request. </p>
<p>Used when a module needs to read from an FD. Typically the callback is set, and then the module returns <a class="el" href="src_2lib_2unlang_2module_8c.html#aa828488a36bd5c78545c095a8e04096e" title="Yield a request back to the interpreter from within a module. ">unlang_module_yield()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The callback is automatically removed on <a class="el" href="interpret_8c.html#a1d05eab74116c44e4edabf4b5bd09890" title="Mark a request as resumable. ">unlang_interpret_resumable()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read</td><td>callback. Used for receiving and demuxing/decoding data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">write</td><td>callback. Used for writing and encoding data. Where a 3rd party library is used, this should be the function issuing queries, and writing data to the socket. This should not be done in the module itself. This allows write operations to be retried in some instances, and means if the write buffer is full, the request is kept in a suspended state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error</td><td>callback. If the fd enters an error state. Should cleanup any handles wrapping the file descriptor, and any outstanding requests. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>for the callback. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>to watch. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 on success.</li>
<li>&lt;0 on error. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00263">263</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_ac345d6c0c436f5d20f7e373a8b18d0cb_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="afe719d12ad2365c0c4a466f3db5d684f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe719d12ad2365c0c4a466f3db5d684f">&#9670;&nbsp;</a></span>unlang_module_fd_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unlang_module_fd_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a previously set file descriptor callback. </p>
<p>param[in] request the request param[in] fd the file descriptor </p><dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 on success.</li>
<li>&lt;0 on error. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00319">319</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_afe719d12ad2365c0c4a466f3db5d684f_cgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aacac2f2ef83343ae1a0651c3e709fa7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacac2f2ef83343ae1a0651c3e709fa7f">&#9670;&nbsp;</a></span>unlang_module_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unlang_module_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00886">886</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_aacac2f2ef83343ae1a0651c3e709fa7f_cgraph.svg" width="100%" height="590"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac6ea45545fcba322246e22515298e97e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6ea45545fcba322246e22515298e97e">&#9670;&nbsp;</a></span>unlang_module_push()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unlang_module_push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server_2module_8h.html#afad2ccd3f72252bce9e9c5cd6c2e6eed">module_instance_t</a> *&#160;</td>
          <td class="paramname"><em>module_instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server_2module_8h.html#af80b8d62962b7d1c1e3b0af13cd479d0">module_method_t</a>&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>top_frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push a module or submodule onto the stack for evaluation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Where to write the result of calling the module. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_instance</td><td>Instance of the module to call. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>to call. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">top_frame</td><td>Set to UNLANG_TOP_FRAME if the interpreter should return. Set to UNLANG_SUB_FRAME if the interprer should continue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 on success.</li>
<li>-1 on failure. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00342">342</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_ac6ea45545fcba322246e22515298e97e_cgraph.svg" width="542" height="164"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7e539fb86ff1ad93cd142a7443f0fa61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e539fb86ff1ad93cd142a7443f0fa61">&#9670;&nbsp;</a></span>unlang_module_resume()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_resume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>p_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper to call a module's resumption function. </p>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00654">654</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a7e539fb86ff1ad93cd142a7443f0fa61_cgraph.svg" width="394" height="256"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a785cafdb7d6144e87f0875e3d394d872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785cafdb7d6144e87f0875e3d394d872">&#9670;&nbsp;</a></span>unlang_module_resume_final()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_resume_final </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>p_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return UNLANG_CALCULATE_RESULT only for async async calls. </p>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00638">638</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>

</div>
</div>
<a id="a630369b7f8cbd6e00042f2ca153f241e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630369b7f8cbd6e00042f2ca153f241e">&#9670;&nbsp;</a></span>unlang_module_signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlang_module_signal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="signal_8h.html#a8074925f4834af37765d74bd20cdd8ce">fr_state_signal_t</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a signal (usually stop) to a request. </p>
<p>This is typically called via an "async" action, i.e. an action outside of the normal processing of the request.</p>
<p>If there is no <a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf" title="A callback when the request gets a fr_state_signal_t. ">unlang_module_signal_t</a> callback defined, the action is ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">action</td><td>to signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00609">609</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a630369b7f8cbd6e00042f2ca153f241e_cgraph.svg" width="386" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0aaf3de74431d87c8654184f91e7f912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aaf3de74431d87c8654184f91e7f912">&#9670;&nbsp;</a></span>unlang_module_subrequest_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a>* unlang_module_subrequest_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict_8h.html#a8a299a18628c5635c7e9655343bcfceb">fr_dict_t</a> const *&#160;</td>
          <td class="paramname"><em>namespace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a subrequest to run through a virtual server at some point in the future. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>to hang sub request off of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">namespace</td><td>the child will operate in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>A new child request.</li>
<li>NULL on failure. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00414">414</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a0aaf3de74431d87c8654184f91e7f912_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ace6d57c1f4e694190287b8167e0e946a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace6d57c1f4e694190287b8167e0e946a">&#9670;&nbsp;</a></span>unlang_module_timeout_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unlang_module_timeout_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a6a3aca8c7e2e13f16f0be0ed7d779bf2">unlang_module_timeout_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="time_8h.html#ae3bbe82b46d7b09dbfc1caa6765ddbde">fr_time_t</a>&#160;</td>
          <td class="paramname"><em>when</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a timeout for the request. </p>
<p>Used when a module needs wait for an event. Typically the callback is set, and then the module returns <a class="el" href="src_2lib_2unlang_2module_8c.html#aa828488a36bd5c78545c095a8e04096e" title="Yield a request back to the interpreter from within a module. ">unlang_module_yield()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The callback is automatically removed on <a class="el" href="interpret_8c.html#a1d05eab74116c44e4edabf4b5bd09890" title="Mark a request as resumable. ">unlang_interpret_resumable()</a>.</dd></dl>
<p>param[in] request the current request. param[in] callback to call. param[in] ctx for the callback. param[in] timeout when to call the timeout (i.e. now + timeout). </p><dl class="section return"><dt>Returns</dt><dd><ul>
<li>0 on success.</li>
<li>&lt;0 on error. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00137">137</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_ace6d57c1f4e694190287b8167e0e946a_cgraph.svg" width="100%" height="549"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a3949ac626f5a3b8257f13f851501a03e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3949ac626f5a3b8257f13f851501a03e">&#9670;&nbsp;</a></span>unlang_module_timeout_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unlang_module_timeout_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a previously set timeout callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>a local context for the callback. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>-1 on error.</li>
<li>0 on success. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00183">183</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a3949ac626f5a3b8257f13f851501a03e_cgraph.svg" width="100%" height="404"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa828488a36bd5c78545c095a8e04096e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa828488a36bd5c78545c095a8e04096e">&#9670;&nbsp;</a></span>unlang_module_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_yield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a>&#160;</td>
          <td class="paramname"><em>resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yield a request back to the interpreter from within a module. </p>
<p>This passes control of the request back to the unlang interpreter, setting callbacks to execute when the request is 'signalled' asynchronously, or whatever timer or I/O event the module was waiting for occurs.</p>
<dl class="section note"><dt>Note</dt><dd>The module function which calls <a class="el" href="src_2lib_2unlang_2module_8c.html#aa828488a36bd5c78545c095a8e04096e" title="Yield a request back to the interpreter from within a module. ">unlang_module_yield</a> should return control of the C stack to the unlang interpreter immediately after calling <a class="el" href="src_2lib_2unlang_2module_8c.html#aa828488a36bd5c78545c095a8e04096e" title="Yield a request back to the interpreter from within a module. ">unlang_module_yield</a>. A common pattern is to use <code>return unlang_module_yield(...)</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resume</td><td>Called on <a class="el" href="interpret_8c.html#a1d05eab74116c44e4edabf4b5bd09890" title="Mark a request as resumable. ">unlang_interpret_resumable()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>Called on unlang_action(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>to pass to the callbacks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>UNLANG_ACTION_YIELD. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00748">748</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_aa828488a36bd5c78545c095a8e04096e_cgraph.svg" width="584" height="256"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6af27356eb341612e8aeecbc224d89c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af27356eb341612e8aeecbc224d89c4">&#9670;&nbsp;</a></span>unlang_module_yield_to_section()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_yield_to_section </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>p_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cf__util_8h.html#a0f39d8043920472ea4c687c97f7173b3">CONF_SECTION</a> *&#160;</td>
          <td class="paramname"><em>subcs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a>&#160;</td>
          <td class="paramname"><em>default_rcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a>&#160;</td>
          <td class="paramname"><em>resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00542">542</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a6af27356eb341612e8aeecbc224d89c4_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a242ed1c8d3c8ce6174df1e79a99fbbe9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242ed1c8d3c8ce6174df1e79a99fbbe9">&#9670;&nbsp;</a></span>unlang_module_yield_to_subrequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_yield_to_subrequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rcode_8h.html#adcc711080df76349e177fc29a641d1fb">rlm_rcode_t</a> *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>child</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a>&#160;</td>
          <td class="paramname"><em>resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="subrequest_8h.html#structunlang__subrequest__session__t">unlang_subrequest_session_t</a> const *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yield, spawning a child request, and resuming once the child request is complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Final rcode from when evaluation of the child request finishes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">child</td><td>to yield to. The child knows about the parent, which is why the parent isn't passed explicitly. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resume</td><td>function to call when the child has finished executing. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>function to call if a signal is received. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>control values. Whether we restore/store session info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>to pass to the resume() and signal() callbacks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>UNLANG_ACTION_YIELD. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00431">431</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a242ed1c8d3c8ce6174df1e79a99fbbe9_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a94769c1912b28739af384f1697d3cb9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94769c1912b28739af384f1697d3cb9f">&#9670;&nbsp;</a></span>unlang_module_yield_to_tmpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_yield_to_tmpl </td>
          <td>(</td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="value_8h.html#a4a9e69e78ad1a81da0976e8f29a4e444">fr_value_box_t</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server_2tmpl_8h.html#ab59ad3d0e1f259dd7dff0be6d621f691">tmpl_t</a> const *&#160;</td>
          <td class="paramname"><em>vpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="util_2pair_8h.html#a9ab81fd13d950dc8af802107f161d222">fr_pair_t</a> *&#160;</td>
          <td class="paramname"><em>vps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a>&#160;</td>
          <td class="paramname"><em>resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push a pre-compiled tmpl and resumption state onto the stack for evaluation. </p>
<p>In order to use the async unlang processor the calling module needs to establish a resumption point, as the call to an xlat function may require yielding control back to the interpreter.</p>
<p>To simplify the calling conventions, this function is provided to first push a resumption stack frame for the module, and then push a tmpl stack frame.</p>
<p>After pushing those frames the function updates the stack pointer to jump over the resumption frame and execute the tmpl expansion.</p>
<p>When the tmpl interpreter finishes, and pops the tmpl frame, the unlang interpreter will then call the module resumption frame, allowing the module to continue exectuion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>To allocate talloc value boxes and values in. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Where to write the result of the expansion. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>exit status of the program </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vpt</td><td>the tmpl to expand </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vps</td><td>the input VPs. May be NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resume</td><td>function to call when the XLAT expansion is complete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>function to call if a signal is received. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>to pass to the resume() and signal() callbacks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>UNLANG_ACTION_YIELD </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00522">522</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a94769c1912b28739af384f1697d3cb9f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a765cb3bdd30e8e4d14bec89fa3e39f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a765cb3bdd30e8e4d14bec89fa3e39f2f">&#9670;&nbsp;</a></span>unlang_module_yield_to_xlat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8h.html#ad02ab717522305fe70aab72d152fc812">unlang_action_t</a> unlang_module_yield_to_xlat </td>
          <td>(</td>
          <td class="paramtype">TALLOC_CTX *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="value_8h.html#a4a9e69e78ad1a81da0976e8f29a4e444">fr_value_box_t</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="radclient_8c.html#a2fc1b64f51f8225195d32592e6fe8fc5">request_t</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="xlat_8h.html#a1231cafee784e258e923550326d7a6b6">xlat_exp_t</a> const *&#160;</td>
          <td class="paramname"><em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a4a0d18690b3a7c5d3f9923741e897039">unlang_module_resume_t</a>&#160;</td>
          <td class="paramname"><em>resume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unlang_2module_8h.html#a59912d7666e2134c9f0d93511e4922cf">unlang_module_signal_t</a>&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push a pre-compiled xlat and resumption state onto the stack for evaluation. </p>
<p>In order to use the async unlang processor the calling module needs to establish a resumption point, as the call to an xlat function may require yielding control back to the interpreter.</p>
<p>To simplify the calling conventions, this function is provided to first push a resumption stack frame for the module, and then push an xlat stack frame.</p>
<p>After pushing those frames the function updates the stack pointer to jump over the resumption frame and execute the xlat interpreter.</p>
<p>When the xlat interpreter finishes, and pops the xlat frame, the unlang interpreter will then call the module resumption frame, allowing the module to continue exectuion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>To allocate talloc value boxes and values in. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Where to write the result of the expansion. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The current request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">exp</td><td>XLAT expansion to evaluate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resume</td><td>function to call when the XLAT expansion is complete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal</td><td>function to call if a signal is received. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rctx</td><td>to pass to the resume() and signal() callbacks. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>UNLANG_ACTION_YIELD </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2lib_2unlang_2module_8c_source.html#l00476">476</a> of file <a class="el" href="src_2lib_2unlang_2module_8c_source.html">module.c</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="src_2lib_2unlang_2module_8c_a765cb3bdd30e8e4d14bec89fa3e39f2f_cgraph.svg" width="100%" height="568"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 12 2020 20:22:05 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
